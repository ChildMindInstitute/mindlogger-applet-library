{"remainingRequest":"/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/src/components/Login/LoginForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/src/components/Login/LoginForm.vue","mtime":1617363134000},{"path":"/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport api from \"../../services/Api/api.vue\";\nimport _ from \"lodash\";\nexport default {\n  data: function data() {\n    var _this = this;\n\n    return {\n      valid: true,\n      email: \"\",\n      emailRules: [function (v) {\n        return !!v || _this.$i18n.t(\"emailRequired\");\n      }, function (v) {\n        return /.+@.+\\..+/.test(v) || _this.$i18n.t(\"emailMustBeValid\");\n      }],\n      password: \"\",\n      passwordRules: [function (v) {\n        return !!v || _this.$i18n.t(\"passwordRequired\");\n      }],\n      error: \"\",\n      // languages: [\n      //   {\n      //     label: this.$i18n.t('en'),\n      //     value: \"en_US\",\n      //   },\n      //   {\n      //     label: this.$i18n.t('fr'),\n      //     value: \"fr_FR\",\n      //   },\n      // ],\n      currentLanguage: \"en_US\"\n    };\n  },\n  computed: {\n    apiHost: function apiHost() {\n      return this.$store.state.backend;\n    },\n    languages: function languages() {\n      return [{\n        label: this.$i18n.t('en'),\n        value: \"en_US\"\n      }, {\n        label: this.$i18n.t('fr'),\n        value: \"fr_FR\"\n      }];\n    }\n  },\n  created: function created() {\n    this.currentLanguage = this.$route.query.lang || this.$store.state.currentLanguage;\n  },\n  methods: {\n    onLanguageChange: function onLanguageChange() {\n      this.$i18n.locale = this.currentLanguage;\n      this.$store.commit(\"setCurrentLanguage\", this.currentLanguage);\n      this.$router.replace({\n        query: {\n          lang: this.currentLanguage\n        }\n      });\n    },\n    login: function login() {\n      var _this2 = this;\n\n      if (!this.$refs.form.validate()) {\n        return;\n      }\n\n      this.error = \"\";\n      api.signIn({\n        apiHost: this.$store.state.backend,\n        user: this.email,\n        password: this.password\n      }).then(function (resp) {\n        _this2.$store.commit(\"setAuth\", {\n          auth: resp.data,\n          email: _this2.email\n        });\n\n        _this2.setAccounts();\n\n        _this2.setUserDetails();\n      }).catch(function (e) {\n        _this2.error = e.response.data.message;\n      });\n    },\n    setAccounts: function setAccounts() {\n      var _this3 = this;\n\n      api.getAccounts({\n        apiHost: this.apiHost,\n        token: this.$store.state.auth.authToken.token\n      }).then(function (resp) {\n        _this3.$store.commit(\"setAccounts\", resp.data);\n\n        _this3.$router.push(\"/dashboard\").catch(function (err) {});\n      }).catch(function (err) {\n        console.warn(err);\n      });\n    },\n    setUserDetails: function setUserDetails() {\n      var _this4 = this;\n\n      api.getUserDetails({\n        apiHost: this.apiHost,\n        token: this.$store.state.auth.authToken.token\n      }).then(function (resp) {\n        _this4.$store.commit(\"setUserDetails\", resp.data);\n\n        _this4.$router.push(\"/dashboard\").catch(function (err) {});\n      }).catch(function (err) {\n        console.warn(err);\n      });\n    },\n    onSetBackend: function onSetBackend() {\n      this.$emit(\"setBackend\", null);\n    }\n  }\n};",{"version":3,"sources":["LoginForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <v-card class=\"elevation-12\">\n      <v-toolbar\n        color=\"primary\"\n        dark\n        flat\n      >\n        <v-toolbar-title>{{ $t(\"login\") }} </v-toolbar-title>\n      </v-toolbar>\n      <v-card-text>\n        <p>\n          {{ $t(\"logIntoAccount\") }}\n        </p>\n        <v-form\n          ref=\"form\"\n          lazy-validation\n        >\n          <v-text-field\n            v-model=\"email\"\n            :label=\"$t('login')\"\n            prepend-icon=\"mdi-account\"\n          />\n\n          <v-text-field\n            v-model=\"password\"\n            :rules=\"passwordRules\"\n            :label=\"$t('password')\"\n            type=\"password\"\n            prepend-icon=\"lock\"\n          />\n        </v-form>\n\n        <div\n          v-if=\"error\"\n          class=\"error\"\n        >\n          {{ error }}\n        </div>\n        <v-row align=\"center\">\n          <v-col cols=\"auto\">\n            <v-btn\n              color=\"primary\"\n              @click=\"login\"\n            >\n              {{ $t(\"login\") }}\n            </v-btn>\n          </v-col>\n          <v-col cols=\"4\">\n            <v-select\n              v-model=\"currentLanguage\"\n              :items=\"languages\"\n              :label=\"$t('selectLanguage')\"\n              item-text=\"label\"\n              item-value=\"value\"\n              hide-details\n              single-line\n              outlined\n              dense\n              @change=\"onLanguageChange\"\n            />\n          </v-col>\n        </v-row>\n      </v-card-text>\n    </v-card>\n  </div>\n</template>\n\n<style scoped>\n.error {\n  color: \"red\";\n}\n\n.v-btn {\n  margin: 6px 8px;\n}\n\n/* .v-select__selections input {\n  width: 0;\n} */\n</style>\n\n<script>\nimport api from '../../services/Api/api.vue';\nimport _ from \"lodash\";\n\nexport default {\n  data() {\n    return {\n      valid: true,\n      email: \"\",\n      emailRules: [\n        (v) => !!v || this.$i18n.t(\"emailRequired\"),\n        (v) => /.+@.+\\..+/.test(v) || this.$i18n.t(\"emailMustBeValid\"),\n      ],\n      password: \"\",\n      passwordRules: [(v) => !!v || this.$i18n.t(\"passwordRequired\")],\n      error: \"\",\n      // languages: [\n      //   {\n      //     label: this.$i18n.t('en'),\n      //     value: \"en_US\",\n      //   },\n      //   {\n      //     label: this.$i18n.t('fr'),\n      //     value: \"fr_FR\",\n      //   },\n      // ],\n      currentLanguage: \"en_US\",\n    }\n  },\n\n  computed: {\n    apiHost() {\n      return this.$store.state.backend;\n    },\n    languages() {\n      return [\n        {\n          label: this.$i18n.t('en'),\n          value: \"en_US\",\n        },\n        {\n          label: this.$i18n.t('fr'),\n          value: \"fr_FR\",\n        },\n      ]\n    }\n  },\n\n  created() {\n    this.currentLanguage = this.$route.query.lang || this.$store.state.currentLanguage;\n  },\n\n  methods: {\n    onLanguageChange() {\n      this.$i18n.locale = this.currentLanguage;\n      this.$store.commit(\"setCurrentLanguage\", this.currentLanguage);\n      this.$router.replace({ query: { lang: this.currentLanguage }})\n    },\n    login() {\n      if (!this.$refs.form.validate()) {\n        return;\n      }\n\n      this.error = \"\";\n      api\n        .signIn({\n          apiHost: this.$store.state.backend,\n          user: this.email,\n          password: this.password,\n        })\n        .then((resp) => {\n          this.$store.commit(\"setAuth\", { auth: resp.data, email: this.email });\n         \n          this.setAccounts();\n          this.setUserDetails();\n        })\n        .catch((e) => {\n          this.error = e.response.data.message;\n        });\n    },\n\n    setAccounts() {\n      api\n        .getAccounts({\n          apiHost: this.apiHost,\n          token: this.$store.state.auth.authToken.token,\n        })\n        .then((resp) => {\n          this.$store.commit(\"setAccounts\", resp.data);\n          this.$router.push(\"/dashboard\").catch(err => {});\n        })\n        .catch((err) => {\n          console.warn(err);\n        });\n    },\n    setUserDetails()\n    {\n      api\n        .getUserDetails({\n          apiHost: this.apiHost,\n          token: this.$store.state.auth.authToken.token,\n        })\n        .then((resp) => {\n          this.$store.commit(\"setUserDetails\", resp.data);\n          this.$router.push(\"/dashboard\").catch(err => {});\n        })\n        .catch((err) => {\n          console.warn(err);\n        });\n    },\n    onSetBackend() {\n      this.$emit(\"setBackend\", null);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.ml-32 {\n  margin-left: 32px;\n}\n.text-underline {\n  text-decoration: underline;\n  user-select: none;\n  cursor: pointer;\n}\n</style>\n"],"sourceRoot":"src/components/Login"}]}