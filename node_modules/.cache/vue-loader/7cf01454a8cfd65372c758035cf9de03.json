{"remainingRequest":"/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/src/components/Login/LoginForm.vue?vue&type=style&index=1&id=1797a707&lang=scss&scoped=true&","dependencies":[{"path":"/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/src/components/Login/LoginForm.vue","mtime":1616989248000},{"path":"/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Disk1/work/work/mindlogger/mindlogger-applet-library/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.ml-32 {\n  margin-left: 32px;\n}\n.text-underline {\n  text-decoration: underline;\n  user-select: none;\n  cursor: pointer;\n}\n",{"version":3,"sources":["LoginForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LoginForm.vue","sourceRoot":"src/components/Login","sourcesContent":["<template>\n  <div>\n    <v-card class=\"elevation-12\">\n      <v-toolbar\n        color=\"primary\"\n        dark\n        flat\n      >\n        <v-toolbar-title>{{ $t(\"login\") }} </v-toolbar-title>\n      </v-toolbar>\n      <v-card-text>\n        <p>\n          {{ $t(\"logIntoAccount\") }}\n        </p>\n        <v-form\n          ref=\"form\"\n          lazy-validation\n        >\n          <v-text-field\n            v-model=\"email\"\n            :label=\"$t('login')\"\n            prepend-icon=\"mdi-account\"\n          />\n\n          <v-text-field\n            v-model=\"password\"\n            :rules=\"passwordRules\"\n            :label=\"$t('password')\"\n            type=\"password\"\n            prepend-icon=\"lock\"\n          />\n        </v-form>\n\n        <div\n          v-if=\"error\"\n          class=\"error\"\n        >\n          {{ error }}\n        </div>\n        <p\n          class=\"ml-32 text-underline\"\n          @click=\"onForgotPassword\"\n        >\n          {{ $t(\"forgotPassword\") }}?\n        </p>\n\n        <v-row align=\"center\">\n          <v-col cols=\"auto\">\n            <v-btn\n              color=\"primary\"\n              @click=\"login\"\n            >\n              {{ $t(\"login\") }}\n            </v-btn>\n          </v-col>\n          <v-col cols=\"auto\">\n            <v-btn\n              outlined\n              color=\"primary\"\n              @click=\"onCreateAccount\"\n            >\n              {{ $t(\"createAccount\") }}\n            </v-btn>\n          </v-col>\n          <v-col cols=\"4\">\n            <v-select\n              v-model=\"currentLanguage\"\n              :items=\"languages\"\n              :label=\"$t('selectLanguage')\"\n              item-text=\"label\"\n              item-value=\"value\"\n              hide-details\n              single-line\n              outlined\n              dense\n              @change=\"onLanguageChange\"\n            />\n          </v-col>\n        </v-row>\n      </v-card-text>\n    </v-card>\n  </div>\n</template>\n\n<style scoped>\n.error {\n  color: \"red\";\n}\n\n.v-btn {\n  margin: 6px 8px;\n}\n\n/* .v-select__selections input {\n  width: 0;\n} */\n</style>\n\n<script>\nimport api from \"../Utils/api/api.vue\";\nimport _ from \"lodash\";\n\nexport default {\n  data() {\n    return {\n      valid: true,\n      email: \"\",\n      emailRules: [\n        (v) => !!v || this.$i18n.t(\"emailRequired\"),\n        (v) => /.+@.+\\..+/.test(v) || this.$i18n.t(\"emailMustBeValid\"),\n      ],\n      password: \"\",\n      passwordRules: [(v) => !!v || this.$i18n.t(\"passwordRequired\")],\n      error: \"\",\n      // languages: [\n      //   {\n      //     label: this.$i18n.t('en'),\n      //     value: \"en_US\",\n      //   },\n      //   {\n      //     label: this.$i18n.t('fr'),\n      //     value: \"fr_FR\",\n      //   },\n      // ],\n      currentLanguage: \"en_US\",\n    }\n  },\n\n  computed: {\n    apiHost() {\n      return this.$store.state.backend;\n    },\n    languages() {\n      return [\n        {\n          label: this.$i18n.t('en'),\n          value: \"en_US\",\n        },\n        {\n          label: this.$i18n.t('fr'),\n          value: \"fr_FR\",\n        },\n      ]\n    }\n  },\n\n  created() {\n    this.currentLanguage = this.$route.query.lang || this.$store.state.currentLanguage;\n  },\n\n  methods: {\n    onLanguageChange() {\n      this.$i18n.locale = this.currentLanguage;\n      this.$store.commit(\"setCurrentLanguage\", this.currentLanguage);\n      this.$router.replace({ query: { lang: this.currentLanguage }})\n    },\n    login() {\n      if (!this.$refs.form.validate()) {\n        return;\n      }\n\n      this.error = \"\";\n      api\n        .signIn({\n          apiHost: this.$store.state.backend,\n          user: this.email,\n          password: this.password,\n        })\n        .then((resp) => {\n          this.$store.commit(\"setAuth\", { auth: resp.data, email: this.email });\n         \n          this.setAccounts();\n          this.setUserDetails();\n        })\n        .catch((e) => {\n          this.error = e.response.data.message;\n        });\n    },\n\n    setAccounts() {\n      api\n        .getAccounts({\n          apiHost: this.apiHost,\n          token: this.$store.state.auth.authToken.token,\n        })\n        .then((resp) => {\n          this.$store.commit(\"setAccounts\", resp.data);\n          this.$router.push(\"/dashboard\").catch(err => {});\n        })\n        .catch((err) => {\n          console.warn(err);\n        });\n    },\n    setUserDetails()\n    {\n      api\n        .getUserDetails({\n          apiHost: this.apiHost,\n          token: this.$store.state.auth.authToken.token,\n        })\n        .then((resp) => {\n          this.$store.commit(\"setUserDetails\", resp.data);\n          this.$router.push(\"/dashboard\").catch(err => {});\n        })\n        .catch((err) => {\n          console.warn(err);\n        });\n    },\n    onCreateAccount() {\n      this.$emit(\"createAccount\", null);\n    },\n    onSetBackend() {\n      this.$emit(\"setBackend\", null);\n    },\n    onForgotPassword() {\n      this.$emit(\"forgotPassword\", null);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.ml-32 {\n  margin-left: 32px;\n}\n.text-underline {\n  text-decoration: underline;\n  user-select: none;\n  cursor: pointer;\n}\n</style>\n"]}]}