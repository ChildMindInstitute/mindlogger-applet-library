{"version":3,"sources":["../../src/ts/widgets/agPanel.ts"],"names":[],"mappings":"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","file":"agPanel.js","sourcesContent":["import { RefSelector } from \"./componentAnnotations\";\nimport { PostConstruct, Autowired } from \"../context/context\";\nimport { Component } from \"./component\";\nimport { PopupService } from \"./popupService\";\nimport { GridOptionsWrapper } from \"../gridOptionsWrapper\";\nimport { _ } from \"../utils\";\n\nexport interface PanelOptions {\n    component?: Component;\n    hideTitleBar?: boolean;\n    closable?: boolean;\n    title?: string;\n    minWidth?: number;\n    width?: number | string;\n    minHeight?: number;\n    height?: number | string;\n    centered?: boolean;\n    x?: number;\n    y?: number;\n}\n\nexport class AgPanel extends Component {\n\n    private static TEMPLATE =\n        `<div class=\"ag-panel\" tabindex=\"-1\">\n            <div ref=\"eTitleBar\" class=\"ag-title-bar ag-unselectable\">\n                <span ref=\"eTitle\" class=\"ag-title-bar-title\"></span>\n                <div ref=\"eTitleBarButtons\" class=\"ag-title-bar-buttons\"></div>\n            </div>\n            <div ref=\"eContentWrapper\" class=\"ag-panel-content-wrapper\"></div>\n        </div>`;\n\n    protected static CLOSE_BTN_TEMPLATE = `<div class=\"ag-button\"></div>`;\n\n    @Autowired('popupService') protected popupService: PopupService;\n    @Autowired('gridOptionsWrapper') protected gridOptionsWrapper: GridOptionsWrapper;\n\n    protected closable = true;\n    protected config: PanelOptions | undefined;\n\n    protected closeButtonComp: Component;\n    protected popupParent: HTMLElement;\n    protected minWidth: number;\n    protected minHeight?: number;\n    protected positioned = false;\n\n    protected dragStartPosition = {\n        x: 0,\n        y: 0\n    };\n\n    protected position = {\n        x: 0,\n        y: 0\n    };\n\n    protected size: { width: number | undefined, height: number | undefined } = {\n        width:undefined,\n        height: undefined\n    };\n\n    public close: () => void;\n\n    @RefSelector('eContentWrapper') protected eContentWrapper: HTMLElement;\n    @RefSelector('eTitleBar') protected eTitleBar: HTMLElement;\n    @RefSelector('eTitleBarButtons') protected eTitleBarButtons: HTMLElement;\n    @RefSelector('eTitle') protected eTitle: HTMLElement;\n\n    constructor(config?: PanelOptions) {\n        super(AgPanel.TEMPLATE);\n        this.config = config;\n    }\n\n    @PostConstruct\n    protected postConstruct() {\n        const {\n            component,\n            closable,\n            hideTitleBar,\n            title,\n            minWidth,\n            width,\n            minHeight,\n            height,\n            centered,\n            x,\n            y\n        } = this.config;\n\n        const eGui = this.getGui();\n\n        if (component) { this.setBodyComponent(component); }\n\n        if (!hideTitleBar) {\n            if (title) { this.setTitle(title); }\n            this.setClosable(closable != null ? closable : this.closable);\n        } else {\n            _.addCssClass(this.eTitleBar, 'ag-hidden');\n        }\n\n        this.addDestroyableEventListener(this.eTitleBar, 'mousedown', (e: MouseEvent) => {\n            if (\n                eGui.contains(e.relatedTarget as HTMLElement) ||\n                eGui.contains(document.activeElement) ||\n                this.eTitleBarButtons.contains(e.target as HTMLElement)\n            ) {\n                e.preventDefault();\n                return;\n            }\n\n            const focusEl = this.eContentWrapper.querySelector('button, [href], input, select, textarea, [tabindex]');\n\n            if (focusEl) {\n                (focusEl as HTMLElement).focus();\n            }\n        });\n\n        if (this.positioned) { return; }\n\n        this.minHeight = minHeight != null ? minHeight : 250;\n        this.minWidth = minWidth != null ? minWidth : 250;\n\n        this.popupParent = this.popupService.getPopupParent();\n\n        if (width) {\n            this.setWidth(width);\n        }\n\n        if (height) {\n            this.setHeight(height);\n        }\n\n        if (this.renderComponent) {\n            this.renderComponent();\n        }\n\n        if (!width || !height) {\n            this.refreshSize();\n        }\n\n        if (centered) {\n            this.center();\n        } else if (x || y) {\n            this.offsetElement(x, y);\n        }\n\n        this.positioned = true;\n        this.eContentWrapper.style.height = '0';\n    }\n\n    protected renderComponent() {\n        const eGui = this.getGui();\n        eGui.focus();\n\n        this.close = () => {\n            eGui.parentElement.removeChild(eGui);\n            this.destroy();\n        };\n    }\n\n    protected updateDragStartPosition(x: number, y: number) {\n        this.dragStartPosition = { x, y };\n    }\n\n    protected calculateMouseMovement(params: {\n        e: MouseEvent,\n        topBuffer?: number,\n        anywhereWithin?: boolean,\n        isLeft?: boolean,\n        isTop?: boolean\n    }): { movementX: number, movementY: number} {\n        const parentRect = this.popupParent.getBoundingClientRect();\n        const { e, isLeft, isTop, anywhereWithin, topBuffer } = params;\n        let movementX = e.clientX - this.dragStartPosition.x;\n        let movementY = e.clientY - this.dragStartPosition.y;\n        const width = this.getWidth();\n        const height = this.getHeight();\n\n        // skip if cursor is outside of popupParent horizontally\n        let skipX = (\n            parentRect.left >= e.clientX && this.position.x <= 0 ||\n            parentRect.right <= e.clientX && parentRect.right <= this.position.x + parentRect.left + width\n        );\n\n        if (!skipX) {\n            if (isLeft) {\n                skipX = (\n                    // skip if we are moving to the left and the cursor\n                    // is positioned to the right of the left side anchor\n                    (movementX < 0 && e.clientX > this.position.x + parentRect.left) ||\n                    // skip if we are moving to the right and the cursor\n                    // is positioned to the left of the dialog\n                    (movementX > 0 && e.clientX < this.position.x + parentRect.left)\n                );\n            } else {\n                if (anywhereWithin) {\n                    // if anywhereWithin is true, we allow to move\n                    // as long as the cursor is within the dialog\n                    skipX = (\n                        (movementX < 0 && e.clientX > this.position.x + parentRect.left + width) ||\n                        (movementX > 0 && e.clientX < this.position.x + parentRect.left)\n                    );\n                } else {\n                    skipX = (\n                        // if the movement is bound to the right side of the dialog\n                        // we skip if we are moving to the left and the cursor\n                        // is to the right of the dialog\n                        (movementX < 0 && e.clientX > this.position.x + parentRect.left + width) ||\n                        // or skip if we are moving to the right and the cursor\n                        // is to the left of the right side anchor\n                        (movementX > 0 && e.clientX < this.position.x + parentRect.left + width)\n                    );\n                }\n            }\n        }\n\n        movementX = skipX ? 0 : movementX;\n\n        const skipY = (\n            // skip if cursor is outside of popupParent vertically\n            parentRect.top >= e.clientY && this.position.y <= 0 ||\n            parentRect.bottom <= e.clientY && parentRect.bottom <= this.position.y + parentRect.top + height ||\n            isTop && (\n                // skip if we are moving to towards top and the cursor is\n                // below the top anchor + topBuffer\n                // note: topBuffer is used when moving the dialog using the title bar\n                (movementY < 0 && e.clientY > this.position.y + parentRect.top + (topBuffer || 0)) ||\n                // skip if we are moving to the bottom and the cursor is\n                // above the top anchor\n                (movementY > 0 && e.clientY < this.position.y + parentRect.top)\n            ) ||\n            // we are anchored to the bottom of the dialog\n            !isTop && (\n                // skip if we are moving towards the top and the cursor\n                // is below the bottom anchor\n                (movementY < 0 && e.clientY > this.position.y + parentRect.top + height) ||\n\n                // skip if we are moving towards the bottom and the cursor\n                // is above the bottom anchor\n                (movementY > 0 && e.clientY < this.position.y + parentRect.top + height)\n            )\n        );\n\n        movementY = skipY ? 0 : movementY;\n\n        return { movementX, movementY };\n    }\n\n    private refreshSize() {\n        const { width, height } = this.size;\n\n        if (!width) {\n            this.setWidth(this.getGui().offsetWidth);\n        }\n\n        if (!height) {\n            this.setHeight(this.getGui().offsetHeight);\n        }\n    }\n\n    protected offsetElement(x = 0, y = 0) {\n        const ePopup = this.getGui();\n\n        this.popupService.positionPopup({\n            ePopup,\n            x,\n            y,\n            minWidth: this.minWidth,\n            minHeight: this.minHeight,\n            keepWithinBounds: true\n        });\n\n        this.position.x = parseInt(ePopup.style.left, 10);\n        this.position.y = parseInt(ePopup.style.top, 10);\n    }\n\n    public getHeight(): number {\n        return this.size.height;\n    }\n\n    public setHeight(height: number | string) {\n        const eGui = this.getGui();\n        let isPercent = false;\n        if (typeof height === 'string' && height.indexOf('%') !== -1) {\n            _.setFixedHeight(eGui, height);\n            height = _.getAbsoluteHeight(eGui);\n            isPercent = true;\n        } else {\n            height = Math.max(this.minHeight, height as number);\n            const offsetParent = eGui.offsetParent;\n            if (offsetParent && offsetParent.clientHeight && (height + this.position.y > offsetParent.clientHeight)) {\n                height = offsetParent.clientHeight - this.position.y;\n            }\n        }\n\n        if (this.size.height === height) { return; }\n\n        this.size.height = height;\n\n        if (!isPercent) {\n            _.setFixedHeight(eGui, height);\n        } else {\n            eGui.style.maxHeight = 'unset';\n            eGui.style.minHeight = 'unset';\n        }\n    }\n\n    public getWidth(): number {\n        return this.size.width;\n    }\n\n    public setWidth(width: number | string) {\n        const eGui = this.getGui();\n        let isPercent = false;\n        if (typeof width === 'string' && width.indexOf('%') !== -1) {\n            _.setFixedWidth(eGui, width);\n            width = _.getAbsoluteWidth(eGui);\n            isPercent = true;\n        } else {\n            width = Math.max(this.minWidth, width as number);\n            const offsetParent = eGui.offsetParent;\n\n            if (offsetParent && offsetParent.clientWidth && (width + this.position.x > offsetParent.clientWidth)) {\n                width = offsetParent.clientWidth - this.position.x;\n            }\n        }\n\n        if (this.size.width === width) { return; }\n\n        this.size.width = width;\n        if (!isPercent) {\n            _.setFixedWidth(eGui, width);\n        } else {\n            eGui.style.maxWidth = 'unset';\n            eGui.style.minWidth = 'unset';\n        }\n    }\n\n    public center() {\n        const eGui = this.getGui();\n\n        const x = (eGui.offsetParent.clientWidth / 2) - (this.getWidth() / 2);\n        const y = (eGui.offsetParent.clientHeight / 2) - (this.getHeight() / 2);\n\n        this.offsetElement(x, y);\n    }\n\n    public setClosable(closable: boolean) {\n        if (closable !== this.closable) {\n            this.closable = closable;\n        }\n\n        if (closable) {\n            const closeButtonComp = this.closeButtonComp = new Component(AgPanel.CLOSE_BTN_TEMPLATE);\n            this.getContext().wireBean(closeButtonComp);\n\n            const eGui = closeButtonComp.getGui();\n            eGui.appendChild(_.createIconNoSpan('close', this.gridOptionsWrapper));\n\n            this.addTitleBarButton(closeButtonComp);\n            closeButtonComp.addDestroyableEventListener(eGui, 'click', this.onBtClose.bind(this));\n        } else if (this.closeButtonComp) {\n            const eGui = this.closeButtonComp.getGui();\n            eGui.parentElement.removeChild(eGui);\n            this.closeButtonComp.destroy();\n            this.closeButtonComp = undefined;\n        }\n    }\n\n    public setBodyComponent(bodyComponent: Component) {\n        bodyComponent.setParentComponent(this);\n        this.eContentWrapper.appendChild(bodyComponent.getGui());\n    }\n\n    public addTitleBarButton(button: Component, position?: number) {\n        const eTitleBarButtons = this.eTitleBarButtons;\n        const buttons = eTitleBarButtons.children;\n        const len = buttons.length;\n\n        if (position == null) {\n            position = len;\n        }\n\n        position = Math.max(0, Math.min(position, len));\n\n        const eGui = button.getGui();\n\n        _.addCssClass(eGui, 'ag-button');\n\n        if (position === 0) {\n            eTitleBarButtons.insertAdjacentElement('afterbegin', eGui);\n        } else if (position === len) {\n            eTitleBarButtons.insertAdjacentElement('beforeend', eGui);\n        } else {\n            buttons[position - 1].insertAdjacentElement('afterend', eGui);\n        }\n\n        button.setParentComponent(this);\n    }\n\n    public getBodyHeight(): number {\n        return _.getInnerHeight(this.eContentWrapper);\n    }\n\n    public getBodyWidth(): number {\n        return _.getInnerWidth(this.eContentWrapper);\n    }\n\n    public setTitle(title: string) {\n        this.eTitle.innerText = title;\n    }\n\n    // called when user hits the 'x' in the top right\n    private onBtClose() {\n        this.close();\n    }\n\n    public destroy(): void {\n        super.destroy();\n\n        if (this.closeButtonComp) {\n            this.closeButtonComp.destroy();\n            this.closeButtonComp = undefined;\n        }\n\n        const eGui = this.getGui();\n\n        if (eGui && eGui.offsetParent) {\n            this.close();\n        }\n    }\n}"]}