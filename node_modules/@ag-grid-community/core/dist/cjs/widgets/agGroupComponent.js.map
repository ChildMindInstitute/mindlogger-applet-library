{"version":3,"sources":["../../src/ts/widgets/agGroupComponent.ts"],"names":[],"mappings":"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","file":"agGroupComponent.js","sourcesContent":["import { Component } from \"./component\";\nimport { RefSelector } from \"./componentAnnotations\";\nimport { Autowired, PostConstruct } from \"../context/context\";\nimport { GridOptionsWrapper } from \"../gridOptionsWrapper\";\nimport { AgCheckbox } from \"./agCheckbox\";\nimport { _ } from \"../utils\";\n\ntype GroupItem = Component | HTMLElement;\n\ninterface GroupParams {\n    title: string;\n    enabled: boolean;\n    suppressEnabledCheckbox: boolean;\n    suppressOpenCloseIcons: boolean;\n    items?: GroupItem[];\n    alignItems?: 'start' | 'end' | 'center' | 'stretch'; // center by default\n}\n\nexport class AgGroupComponent extends Component {\n    private static TEMPLATE =\n        `<div class=\"ag-group-component\">\n            <div class=\"ag-group-component-title-bar\" ref=\"groupTitle\">\n                 <span class=\"ag-column-group-icons\">\n                    <span class=\"ag-column-group-opened-icon\" ref=\"eGroupOpenedIcon\"></span>\n                    <span class=\"ag-column-group-closed-icon\" ref=\"eGroupClosedIcon\"></span>\n                </span>\n                <span ref=\"lbGroupTitle\" class=\"ag-group-component-title\"></span>\n            </div>\n            <div ref=\"eToolbar\" class=\"ag-group-component-toolbar\">\n                <ag-checkbox ref=\"cbGroupEnabled\"></ag-checkbox>\n            </div>\n            <div ref=\"eContainer\" class=\"ag-group-component-container\"></div>\n        </div>`;\n\n    private items: GroupItem[];\n    private title: string;\n    private enabled: boolean;\n    private expanded: boolean;\n    private suppressEnabledCheckbox: boolean = true;\n    private suppressOpenCloseIcons: boolean = false;\n    private alignItems: GroupParams['alignItems'];\n\n    @Autowired('gridOptionsWrapper') private gridOptionsWrapper: GridOptionsWrapper;\n\n    @RefSelector('groupTitle') private groupTitle: HTMLElement;\n    @RefSelector('eGroupOpenedIcon') private eGroupOpenedIcon: HTMLElement;\n    @RefSelector('eGroupClosedIcon') private eGroupClosedIcon: HTMLElement;\n\n    @RefSelector('eToolbar') private eToolbar: HTMLElement;\n    @RefSelector('cbGroupEnabled') private cbGroupEnabled: AgCheckbox;\n    @RefSelector(\"lbGroupTitle\") private lbGroupTitle: HTMLElement;\n    @RefSelector(\"eContainer\") private groupContainer: HTMLElement;\n\n    constructor(params?: GroupParams) {\n        super(AgGroupComponent.TEMPLATE);\n\n        if (!params) {\n            params = {} as GroupParams;\n        }\n\n        const { title, enabled, items, suppressEnabledCheckbox, suppressOpenCloseIcons } = params;\n\n        this.title = title;\n        this.enabled = enabled != null ? enabled : true;\n        this.items = items || [];\n\n        this.alignItems = params.alignItems || 'center';\n\n        if (suppressEnabledCheckbox != null) {\n            this.suppressEnabledCheckbox = suppressEnabledCheckbox;\n        }\n\n        if (suppressOpenCloseIcons != null) {\n            this.suppressOpenCloseIcons = suppressOpenCloseIcons;\n        }\n    }\n\n    @PostConstruct\n    private postConstruct() {\n        if (this.items.length) {\n            const initialItems = this.items;\n            this.items = [];\n\n            this.addItems(initialItems);\n        }\n\n        const localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n        this.cbGroupEnabled.setLabel(localeTextFunc('enabled', 'Enabled'));\n\n        if (this.title) {\n            this.setTitle(this.title);\n        }\n\n        if (this.enabled) {\n            this.setEnabled(this.enabled);\n        }\n\n        this.setAlignItems(this.alignItems);\n\n        this.hideEnabledCheckbox(this.suppressEnabledCheckbox);\n        this.hideOpenCloseIcons(this.suppressOpenCloseIcons);\n\n        this.setupExpandContract();\n    }\n\n    private setupExpandContract(): void {\n        this.eGroupClosedIcon.appendChild(_.createIcon('columnSelectClosed', this.gridOptionsWrapper, null));\n        this.eGroupOpenedIcon.appendChild(_.createIcon('columnSelectOpen', this.gridOptionsWrapper, null));\n\n        this.setOpenClosedIcons();\n\n        this.addDestroyableEventListener(this.groupTitle, 'click', () => this.toggleGroupExpand());\n    }\n\n    private setOpenClosedIcons(): void {\n        const folderOpen = this.expanded;\n        _.setDisplayed(this.eGroupClosedIcon, !folderOpen);\n        _.setDisplayed(this.eGroupOpenedIcon, folderOpen);\n    }\n\n    public isExpanded(): boolean {\n        return this.expanded;\n    }\n\n    public setAlignItems(alignment: GroupParams['alignItems']): this {\n        const eGui = this.getGui();\n\n        if (this.alignItems !== alignment) {\n            _.removeCssClass(eGui, `ag-alignment-${this.alignItems}`);\n        }\n\n        this.alignItems = alignment;\n        const newCls = `ag-alignment-${this.alignItems}`;\n\n        if (alignment !== 'center' && !_.containsClass(eGui, newCls)) {\n            _.addCssClass(eGui, newCls);\n        }\n\n        return this;\n    }\n\n    public toggleGroupExpand(expanded?: boolean): this {\n        const eGui = this.getGui();\n\n        if (this.suppressOpenCloseIcons) {\n            this.expanded = true;\n            _.removeCssClass(eGui, 'ag-collapsed');\n            return this;\n        }\n\n        expanded = expanded != null ? expanded : !this.expanded;\n\n        if (this.expanded === expanded) {\n            return this;\n        }\n\n        this.expanded = expanded;\n        this.setOpenClosedIcons();\n        _.addOrRemoveCssClass(eGui, 'ag-collapsed', !expanded);\n\n        if (this.expanded) {\n            const event = {\n                type: 'expanded',\n            };\n            this.dispatchEvent(event);\n        } else {\n            const event = {\n                type: 'collapsed',\n            };\n            this.dispatchEvent(event);\n        }\n\n        return this;\n    }\n\n    public addItems(items: GroupItem[]) {\n        items.forEach(item => this.addItem(item));\n    }\n\n    public addItem(item: GroupItem) {\n        const container = this.groupContainer;\n        const el = item instanceof Component ? item.getGui() : item;\n        _.addCssClass(el, 'ag-group-item');\n\n        container.appendChild(el);\n        this.items.push(el);\n    }\n\n    public hideItem(hide: boolean, index: number) {\n        const itemToHide = this.items[index] as HTMLElement;\n        _.addOrRemoveCssClass(itemToHide, 'ag-hidden', hide);\n    }\n\n    public setTitle(title: string): this {\n        this.lbGroupTitle.innerText = title;\n        return this;\n    }\n\n    public setEnabled(enabled: boolean, skipToggle?: boolean): this {\n        this.enabled = enabled;\n        _.addOrRemoveCssClass(this.getGui(), 'ag-disabled', !enabled);\n\n        this.toggleGroupExpand(enabled);\n\n        if (!skipToggle) {\n            this.cbGroupEnabled.setValue(enabled);\n        }\n\n        return this;\n    }\n\n    public isEnabled(): boolean {\n        return this.enabled;\n    }\n\n    public onEnableChange(callbackFn: (enabled: boolean) => void): this {\n        this.cbGroupEnabled.onValueChange((newSelection: boolean) => {\n            this.setEnabled(newSelection, true);\n            callbackFn(newSelection);\n        });\n\n        return this;\n    }\n\n    public hideEnabledCheckbox(hide: boolean): this {\n        _.addOrRemoveCssClass(this.eToolbar, 'ag-hidden', hide);\n        return this;\n    }\n\n    public hideOpenCloseIcons(hide: boolean): this {\n        this.suppressOpenCloseIcons = hide;\n        _.addOrRemoveCssClass(this.getGui(), 'ag-collapsible', !hide);\n\n        if (hide) {\n            this.toggleGroupExpand(true);\n        }\n        return this;\n    }\n}"]}