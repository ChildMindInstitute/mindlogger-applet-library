{"version":3,"sources":["../../src/ts/pagination/paginationProxy.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gDAA6C;AAG7C,oCAA4E;AAE5E,8CAAkE;AAKlE,kCAA2B;AAG3B;IAAqC,mCAAQ;IAA7C;QAAA,qEA8TC;QA/SW,iBAAW,GAAG,CAAC,CAAC;QAEhB,0BAAoB,GAAG,CAAC,CAAC;QACzB,6BAAuB,GAAG,CAAC,CAAC;QAC5B,iBAAW,GAAG,CAAC,CAAC;QAIhB,oBAAc,GAAW,CAAC,CAAC;;IAuSvC,CAAC;IApSW,uCAAa,GAArB;QACI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE,CAAC;QACrD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,kBAAkB,CAAC,mBAAmB,EAAE,CAAC;QAEvE,IAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC,YAAY,EAAE,eAAM,CAAC,mBAAmB,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAEhH,IAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC,kBAAkB,EAAE,oBAAoB,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAEhH,IAAI,CAAC,cAAc,EAAE,CAAC;IAC1B,CAAC;IAEM,+CAAqB,GAA5B,UAA6B,UAAkB,EAAE,QAAgB,EAAE,eAAuB,EAAE,aAAqB;QAC7G,IAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,UAAU,EAAE,QAAQ,EAAE,IAAI,CAAC,eAAe,EAAE,EAAE,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;QACrH,IAAI,GAAG,EAAE;YACL,IAAI,CAAC,cAAc,EAAE,CAAC;SACzB;QACD,OAAO,GAAG,CAAC;IACf,CAAC;IAEO,wCAAc,GAAtB,UAAuB,iBAAqC;QACxD,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAM,sBAAsB,GAA2B;YACnD,IAAI,EAAE,eAAM,CAAC,wBAAwB;YACrC,OAAO,EAAE,iBAAiB,CAAC,CAAC,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK;YAC9D,OAAO,EAAE,iBAAiB,CAAC,CAAC,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK;YAC9D,OAAO,EAAE,iBAAiB,CAAC,CAAC,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK;YAC9D,gBAAgB,EAAE,iBAAiB,CAAC,CAAC,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC,CAAC,KAAK;YAChF,GAAG,EAAE,IAAI,CAAC,OAAO;YACjB,SAAS,EAAE,IAAI,CAAC,SAAS;SAC5B,CAAC;QACF,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,sBAAsB,CAAC,CAAC;IAC5D,CAAC;IAEM,kCAAQ,GAAf,UAAgB,IAAY;QACxB,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YACd,OAAO;SACV;QACD,IAAI,IAAI,CAAC,WAAW,KAAK,IAAI,EAAE;YAC3B,OAAO;SACV;QACD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,IAAM,KAAK,GAAsB;YAC7B,IAAI,EAAE,eAAM,CAAC,mBAAmB;YAChC,OAAO,EAAE,KAAK;YACd,gBAAgB,EAAE,KAAK;YACvB,OAAO,EAAE,KAAK;YACd,OAAO,EAAE,IAAI;YACb,GAAG,EAAE,IAAI,CAAC,OAAO;YACjB,SAAS,EAAE,IAAI,CAAC,SAAS;SAC5B,CAAC;QACF,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;IAC/B,CAAC;IAEM,wCAAc,GAArB;QACI,OAAO,IAAI,CAAC,WAAW,CAAC;IAC5B,CAAC;IAEM,gCAAM,GAAb,UAAc,KAAa;QACvB,OAAO,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACvC,CAAC;IAEM,oCAAU,GAAjB,UAAkB,EAAU;QACxB,OAAO,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;IACxC,CAAC;IAEM,4CAAkB,GAAzB,UAA0B,KAAa;QACnC,OAAO,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;IACnD,CAAC;IAEM,8CAAoB,GAA3B;QACI,IAAI,SAAC,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,SAAC,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe,CAAC,EAAE;YACjE,OAAO,CAAC,CAAC;SACZ;QACD,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;IAChH,CAAC;IAEM,sCAAY,GAAnB,UAAoB,OAAgB;QAChC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE;YACtC,OAAO,KAAK,CAAC;SAChB;QACD,IAAM,YAAY,GAAG,OAAO,CAAC,QAAQ,IAAI,IAAI,CAAC,oBAAoB,IAAI,OAAO,CAAC,QAAQ,IAAI,IAAI,CAAC,uBAAuB,CAAC;QACvH,OAAO,YAAY,CAAC;IACxB,CAAC;IAEM,iCAAO,GAAd;QACI,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;IACnC,CAAC;IAEM,wCAAc,GAArB;QACI,OAAO,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;IAC1C,CAAC;IAEM,qDAA2B,GAAlC,UAAmC,YAAqB,EAAE,WAAoB;QAC1E,OAAO,IAAI,CAAC,QAAQ,CAAC,2BAA2B,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;IAChF,CAAC;IAEM,qCAAW,GAAlB,UAAmB,QAAmD;QAClE,OAAO,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;IAC/C,CAAC;IAEM,iCAAO,GAAd;QACI,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;IACnC,CAAC;IAEM,sCAAY,GAAnB,UAAoB,KAAa;QAC7B,IAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QAC9C,GAAG,CAAC,QAAQ,GAAG,KAAK,CAAC;QACrB,OAAO,GAAG,CAAC;IACf,CAAC;IAEM,yCAAe,GAAtB;QACI,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/D,CAAC;IAEM,wCAAc,GAArB;QACI,OAAO,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACrE,CAAC;IAEM,qCAAW,GAAlB;QACI,OAAO,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;IACvC,CAAC;IAEM,2CAAiB,GAAxB,UAAyB,KAAU;QAC/B,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YACd,OAAO;SACV;QAED,IAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QACrD,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;IAC9B,CAAC;IAEM,yCAAe,GAAtB;QACI,OAAO,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;IAC1C,CAAC;IAEM,wCAAc,GAArB;QACI,OAAO,IAAI,CAAC,WAAW,CAAC;IAC5B,CAAC;IAEM,sCAAY,GAAnB;QACI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;IACxC,CAAC;IAEM,0CAAgB,GAAvB;QACI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;IACxC,CAAC;IAEM,uCAAa,GAApB;QACI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACrB,CAAC;IAEM,sCAAY,GAAnB;QACI,IAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;QAC7C,IAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QACtD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;IAC5B,CAAC;IAEM,qCAAW,GAAlB;QACI,OAAO,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC;IAEM,uCAAa,GAApB;QACI,OAAO,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAEO,qCAAW,GAAnB;QACI,iCAAiC;QACjC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC,qBAAqB,EAAE,CAAC;QAChE,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,EAAE;YACvB,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;SACvB;IACL,CAAC;IAEO,wCAAc,GAAtB;QAEI,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,IAAI,IAAI,CAAC,iBAAiB,EAAE;gBACxB,IAAI,CAAC,qBAAqB,EAAE,CAAC;aAChC;iBAAM;gBACH,IAAI,CAAC,4BAA4B,EAAE,CAAC;aACvC;SACJ;aAAM;YACH,IAAI,CAAC,wBAAwB,EAAE,CAAC;SACnC;QAED,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;QAC1E,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,IAAI,CAAC,YAAY,CAAC,QAAQ,GAAG,IAAI,CAAC,oBAAoB,CAAC;SAC1D;QAED,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAChF,IAAI,IAAI,CAAC,eAAe,EAAE;YACtB,IAAI,CAAC,eAAe,CAAC,QAAQ,GAAG,IAAI,CAAC,uBAAuB,CAAC;SAChE;QAED,IAAI,CAAC,WAAW,GAAG,SAAC,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IAClF,CAAC;IAEO,qCAAW,GAAnB;QACI,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC;QAC9B,IAAI,CAAC,uBAAuB,GAAG,CAAC,CAAC,CAAC;QAClC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;QACrB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;IACxB,CAAC;IAEO,sDAA4B,GAApC;QAEI,mDAAmD;QACnD,uCAAuC;QACvC,iDAAiD;QAEjD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC;QAE1D,IAAI,IAAI,CAAC,cAAc,KAAG,CAAC,EAAE;YACzB,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,OAAO;SACV;QAED,IAAM,kBAAkB,GAAG,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QAEnD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,kBAAkB,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QAEvE,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,UAAU,EAAE;YACrC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;SAC1C;QAED,IAAI,CAAC,SAAC,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,WAAW,GAAG,CAAC,EAAE;YACxD,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;SACxB;QAED,IAAM,oBAAoB,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC;QAC9D,IAAI,kBAAkB,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QAEtE,IAAI,kBAAkB,GAAG,kBAAkB,EAAE;YACzC,kBAAkB,GAAG,kBAAkB,CAAC;SAC3C;QAED,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,QAAQ,CAAC,4BAA4B,CAAC,oBAAoB,CAAC,CAAC;QAC7F,6CAA6C;QAE7C,IAAI,kBAAkB,KAAG,kBAAkB,EAAE;YACzC,sFAAsF;YACtF,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;SAClE;aAAM;YACH,IAAM,mBAAmB,GAAG,IAAI,CAAC,QAAQ,CAAC,4BAA4B,CAAC,kBAAkB,GAAG,CAAC,CAAC,CAAC;YAC/F,8CAA8C;YAC9C,mGAAmG;YACnG,iFAAiF;YACjF,IAAI,CAAC,uBAAuB,GAAG,mBAAmB,GAAG,CAAC,CAAC;SAC1D;IACL,CAAC;IAEM,2CAAiB,GAAxB;QACI,OAAO,IAAI,CAAC,cAAc,CAAC;IAC/B,CAAC;IAEO,+CAAqB,GAA7B;QACI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;QAElD,IAAI,IAAI,CAAC,cAAc,KAAG,CAAC,EAAE;YACzB,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,OAAO;SACV;QAED,IAAM,WAAW,GAAG,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QAE5C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QAEhE,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,UAAU,EAAE;YACrC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;SAC1C;QAED,IAAI,CAAC,SAAC,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,WAAW,GAAG,CAAC,EAAE;YACxD,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;SACxB;QAED,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC;QAC7D,IAAI,CAAC,uBAAuB,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QAE5E,IAAI,IAAI,CAAC,uBAAuB,GAAG,WAAW,EAAE;YAC5C,IAAI,CAAC,uBAAuB,GAAG,WAAW,CAAC;SAC9C;IACL,CAAC;IAEO,kDAAwB,GAAhC;QACI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;QAC5C,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;QACrB,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC;QAC9B,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;IACnE,CAAC;IA3TsB;QAAtB,mBAAS,CAAC,UAAU,CAAC;qDAA6B;IACxB;QAA1B,mBAAS,CAAC,cAAc,CAAC;yDAAoC;IAC7B;QAAhC,mBAAS,CAAC,oBAAoB,CAAC;+DAAgD;IAC9C;QAAjC,mBAAS,CAAC,qBAAqB,CAAC;gEAAkD;IAC3D;QAAvB,mBAAS,CAAC,WAAW,CAAC;sDAA8B;IAC/B;QAArB,mBAAS,CAAC,SAAS,CAAC;oDAA0B;IAmB/C;QADC,uBAAa;wDAUb;IAnCQ,eAAe;QAD3B,cAAI,CAAC,iBAAiB,CAAC;OACX,eAAe,CA8T3B;IAAD,sBAAC;CA9TD,AA8TC,CA9ToC,mBAAQ,GA8T5C;AA9TY,0CAAe","file":"paginationProxy.js","sourcesContent":["import {BeanStub} from \"../context/beanStub\";\nimport {IRowModel, RowBounds} from \"../interfaces/iRowModel\";\nimport {EventService} from \"../eventService\";\nimport {Events, ModelUpdatedEvent, PaginationChangedEvent} from \"../events\";\nimport {RowNode} from \"../entities/rowNode\";\nimport {Autowired, Bean, PostConstruct} from \"../context/context\";\nimport {GridOptionsWrapper} from \"../gridOptionsWrapper\";\nimport {SelectionController} from \"../selectionController\";\nimport {ColumnApi} from \"../columnController/columnApi\";\nimport {GridApi} from \"../gridApi\";\nimport {_} from \"../utils\";\n\n@Bean('paginationProxy')\nexport class PaginationProxy extends BeanStub {\n\n    @Autowired('rowModel') private rowModel: IRowModel;\n    @Autowired('eventService') private eventService: EventService;\n    @Autowired('gridOptionsWrapper') private gridOptionsWrapper: GridOptionsWrapper;\n    @Autowired('selectionController') private selectionController: SelectionController;\n    @Autowired('columnApi') private columnApi: ColumnApi;\n    @Autowired('gridApi') private gridApi: GridApi;\n\n    private active: boolean;\n    private paginateChildRows: boolean;\n\n    private pageSize: number;\n\n    private totalPages: number;\n    private currentPage = 0;\n\n    private topDisplayedRowIndex = 0;\n    private bottomDisplayedRowIndex = 0;\n    private pixelOffset = 0;\n    private topRowBounds: RowBounds;\n    private bottomRowBounds: RowBounds;\n\n    private masterRowCount: number = 0;\n\n    @PostConstruct\n    private postConstruct() {\n        this.active = this.gridOptionsWrapper.isPagination();\n        this.paginateChildRows = this.gridOptionsWrapper.isPaginateChildRows();\n\n        this.addDestroyableEventListener(this.eventService, Events.EVENT_MODEL_UPDATED, this.onModelUpdated.bind(this));\n\n        this.addDestroyableEventListener(this.gridOptionsWrapper, 'paginationPageSize', this.onModelUpdated.bind(this));\n\n        this.onModelUpdated();\n    }\n\n    public ensureRowHeightsValid(startPixel: number, endPixel: number, startLimitIndex: number, endLimitIndex: number): boolean {\n        const res = this.rowModel.ensureRowHeightsValid(startPixel, endPixel, this.getPageFirstRow(), this.getPageLastRow());\n        if (res) {\n            this.calculatePages();\n        }\n        return res;\n    }\n\n    private onModelUpdated(modelUpdatedEvent?: ModelUpdatedEvent): void {\n        this.calculatePages();\n        const paginationChangedEvent: PaginationChangedEvent = {\n            type: Events.EVENT_PAGINATION_CHANGED,\n            animate: modelUpdatedEvent ? modelUpdatedEvent.animate : false,\n            newData: modelUpdatedEvent ? modelUpdatedEvent.newData : false,\n            newPage: modelUpdatedEvent ? modelUpdatedEvent.newPage : false,\n            keepRenderedRows: modelUpdatedEvent ? modelUpdatedEvent.keepRenderedRows : false,\n            api: this.gridApi,\n            columnApi: this.columnApi\n        };\n        this.eventService.dispatchEvent(paginationChangedEvent);\n    }\n\n    public goToPage(page: number): void {\n        if (!this.active) {\n            return;\n        }\n        if (this.currentPage === page) {\n            return;\n        }\n        this.currentPage = page;\n        const event: ModelUpdatedEvent = {\n            type: Events.EVENT_MODEL_UPDATED,\n            animate: false,\n            keepRenderedRows: false,\n            newData: false,\n            newPage: true,\n            api: this.gridApi,\n            columnApi: this.columnApi\n        };\n        this.onModelUpdated(event);\n    }\n\n    public getPixelOffset(): number {\n        return this.pixelOffset;\n    }\n\n    public getRow(index: number): RowNode | null {\n        return this.rowModel.getRow(index);\n    }\n\n    public getRowNode(id: string): RowNode | null {\n        return this.rowModel.getRowNode(id);\n    }\n\n    public getRowIndexAtPixel(pixel: number): number {\n        return this.rowModel.getRowIndexAtPixel(pixel);\n    }\n\n    public getCurrentPageHeight(): number {\n        if (_.missing(this.topRowBounds) || _.missing(this.bottomRowBounds)) {\n            return 0;\n        }\n        return Math.max(this.bottomRowBounds.rowTop + this.bottomRowBounds.rowHeight - this.topRowBounds.rowTop, 0);\n    }\n\n    public isRowPresent(rowNode: RowNode): boolean {\n        if (!this.rowModel.isRowPresent(rowNode)) {\n            return false;\n        }\n        const nodeIsInPage = rowNode.rowIndex >= this.topDisplayedRowIndex && rowNode.rowIndex <= this.bottomDisplayedRowIndex;\n        return nodeIsInPage;\n    }\n\n    public isEmpty(): boolean {\n        return this.rowModel.isEmpty();\n    }\n\n    public isRowsToRender(): boolean {\n        return this.rowModel.isRowsToRender();\n    }\n\n    public getNodesInRangeForSelection(firstInRange: RowNode, lastInRange: RowNode): RowNode[] {\n        return this.rowModel.getNodesInRangeForSelection(firstInRange, lastInRange);\n    }\n\n    public forEachNode(callback: (rowNode: RowNode, index: number) => void): void {\n        return this.rowModel.forEachNode(callback);\n    }\n\n    public getType(): string {\n        return this.rowModel.getType();\n    }\n\n    public getRowBounds(index: number): RowBounds {\n        const res = this.rowModel.getRowBounds(index);\n        res.rowIndex = index;\n        return res;\n    }\n\n    public getPageFirstRow(): number {\n        return this.topRowBounds ? this.topRowBounds.rowIndex : -1;\n    }\n\n    public getPageLastRow(): number {\n        return this.bottomRowBounds ? this.bottomRowBounds.rowIndex : -1;\n    }\n\n    public getRowCount(): number {\n        return this.rowModel.getRowCount();\n    }\n\n    public goToPageWithIndex(index: any): void {\n        if (!this.active) {\n            return;\n        }\n\n        const pageNumber = Math.floor(index / this.pageSize);\n        this.goToPage(pageNumber);\n    }\n\n    public isLastPageFound(): boolean {\n        return this.rowModel.isLastRowFound();\n    }\n\n    public getCurrentPage(): number {\n        return this.currentPage;\n    }\n\n    public goToNextPage(): void {\n        this.goToPage(this.currentPage + 1);\n    }\n\n    public goToPreviousPage(): void {\n        this.goToPage(this.currentPage - 1);\n    }\n\n    public goToFirstPage(): void {\n        this.goToPage(0);\n    }\n\n    public goToLastPage(): void {\n        const rowCount = this.rowModel.getRowCount();\n        const lastPage = Math.floor(rowCount / this.pageSize);\n        this.goToPage(lastPage);\n    }\n\n    public getPageSize(): number {\n        return this.pageSize;\n    }\n\n    public getTotalPages(): number {\n        return this.totalPages;\n    }\n\n    private setPageSize(): void {\n        // show put this into super class\n        this.pageSize = this.gridOptionsWrapper.getPaginationPageSize();\n        if (!(this.pageSize >= 1)) {\n            this.pageSize = 100;\n        }\n    }\n\n    private calculatePages(): void {\n\n        if (this.active) {\n            this.setPageSize();\n            if (this.paginateChildRows) {\n                this.calculatePagesAllRows();\n            } else {\n                this.calculatePagesMasterRowsOnly();\n            }\n        } else {\n            this.calculatedPagesNotActive();\n        }\n\n        this.topRowBounds = this.rowModel.getRowBounds(this.topDisplayedRowIndex);\n        if (this.topRowBounds) {\n            this.topRowBounds.rowIndex = this.topDisplayedRowIndex;\n        }\n\n        this.bottomRowBounds = this.rowModel.getRowBounds(this.bottomDisplayedRowIndex);\n        if (this.bottomRowBounds) {\n            this.bottomRowBounds.rowIndex = this.bottomDisplayedRowIndex;\n        }\n\n        this.pixelOffset = _.exists(this.topRowBounds) ? this.topRowBounds.rowTop : 0;\n    }\n\n    private setZeroRows(): void {\n        this.topDisplayedRowIndex = 0;\n        this.bottomDisplayedRowIndex = -1;\n        this.currentPage = 0;\n        this.totalPages = 0;\n    }\n\n    private calculatePagesMasterRowsOnly(): void {\n\n        // const csrm = <ClientSideRowModel> this.rowModel;\n        // const rootNode = csrm.getRootNode();\n        // const masterRows = rootNode.childrenAfterSort;\n\n        this.masterRowCount = this.rowModel.getTopLevelRowCount();\n\n        if (this.masterRowCount===0) {\n            this.setZeroRows();\n            return;\n        }\n\n        const masterLastRowIndex = this.masterRowCount - 1;\n\n        this.totalPages = Math.floor((masterLastRowIndex) / this.pageSize) + 1;\n\n        if (this.currentPage >= this.totalPages) {\n            this.currentPage = this.totalPages - 1;\n        }\n\n        if (!_.isNumeric(this.currentPage) || this.currentPage < 0) {\n            this.currentPage = 0;\n        }\n\n        const masterPageStartIndex = this.pageSize * this.currentPage;\n        let masterPageEndIndex = (this.pageSize * (this.currentPage + 1)) - 1;\n\n        if (masterPageEndIndex > masterLastRowIndex) {\n            masterPageEndIndex = masterLastRowIndex;\n        }\n\n        this.topDisplayedRowIndex = this.rowModel.getTopLevelRowDisplayedIndex(masterPageStartIndex);\n        // masterRows[masterPageStartIndex].rowIndex;\n\n        if (masterPageEndIndex===masterLastRowIndex) {\n            // if showing the last master row, then we want to show the very last row of the model\n            this.bottomDisplayedRowIndex = this.rowModel.getRowCount() - 1;\n        } else {\n            const firstIndexNotToShow = this.rowModel.getTopLevelRowDisplayedIndex(masterPageEndIndex + 1);\n            //masterRows[masterPageEndIndex + 1].rowIndex;\n            // this gets the index of the last child - eg current row is open, we want to display all children,\n            // the index of the last child is one less than the index of the next parent row.\n            this.bottomDisplayedRowIndex = firstIndexNotToShow - 1;\n        }\n    }\n\n    public getMasterRowCount(): number {\n        return this.masterRowCount;\n    }\n\n    private calculatePagesAllRows(): void {\n        this.masterRowCount = this.rowModel.getRowCount();\n\n        if (this.masterRowCount===0) {\n            this.setZeroRows();\n            return;\n        }\n\n        const maxRowIndex = this.masterRowCount - 1;\n\n        this.totalPages = Math.floor((maxRowIndex) / this.pageSize) + 1;\n\n        if (this.currentPage >= this.totalPages) {\n            this.currentPage = this.totalPages - 1;\n        }\n\n        if (!_.isNumeric(this.currentPage) || this.currentPage < 0) {\n            this.currentPage = 0;\n        }\n\n        this.topDisplayedRowIndex = this.pageSize * this.currentPage;\n        this.bottomDisplayedRowIndex = (this.pageSize * (this.currentPage + 1)) - 1;\n\n        if (this.bottomDisplayedRowIndex > maxRowIndex) {\n            this.bottomDisplayedRowIndex = maxRowIndex;\n        }\n    }\n\n    private calculatedPagesNotActive(): void {\n        this.pageSize = this.rowModel.getRowCount();\n        this.totalPages = 1;\n        this.currentPage = 0;\n        this.topDisplayedRowIndex = 0;\n        this.bottomDisplayedRowIndex = this.rowModel.getRowCount() - 1;\n    }\n}\n"]}