{"version":3,"sources":["../../src/ts/utils/general.ts"],"names":[],"mappings":"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","file":"general.js","sourcesContent":["import { GridOptionsWrapper } from \"../gridOptionsWrapper\";\nimport { Column } from \"../entities/column\";\nimport { RowNode } from \"../entities/rowNode\";\nimport { Constants } from \"../constants\";\nimport { ICellRendererComp } from \"../rendering/cellRenderers/iCellRenderer\";\nimport { SuppressKeyboardEventParams } from \"../entities/colDef\";\nimport { CellComp } from \"../rendering/cellComp\";\nimport { IFrameworkOverrides } from \"../interfaces/iFrameworkOverrides\";\nimport { Promise } from \"./promise\";\n\nconst FUNCTION_STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\nconst FUNCTION_ARGUMENT_NAMES = /([^\\s,]+)/g;\n\nconst AG_GRID_STOP_PROPAGATION = '__ag_Grid_Stop_Propagation';\n\n/**\n * HTML Escapes.\n */\nconst HTML_ESCAPES: { [id: string]: string } = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n};\n\nconst reUnescapedHtml = /[&<>\"']/g;\n\nexport class Utils {\n    private static PASSIVE_EVENTS = ['touchstart', 'touchend', 'touchmove', 'touchcancel'];\n    private static OUTSIDE_ANGULAR_EVENTS = ['mouseover', 'mouseout', 'mouseenter', 'mouseleave'];\n\n    /**\n     * These variables are lazy loaded, as otherwise they try and get initialised when we are loading\n     * unit tests and we don't have references to window or document in the unit tests\n     * from http://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\n     */\n    private static isSafari: boolean;\n    private static isIE: boolean;\n    private static isEdge: boolean;\n    private static isChrome: boolean;\n    private static isFirefox: boolean;\n\n    private static isIOS: boolean;\n\n    private static PRINTABLE_CHARACTERS = 'qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM1234567890!\"£$%^&*()_+-=[];\\'#,./\\\\|<>?:@~{}';\n\n    private static NUMPAD_DEL_NUMLOCK_ON_KEY = 'Del';\n    private static NUMPAD_DEL_NUMLOCK_ON_CHARCODE = 46;\n\n    private static doOnceFlags: { [key: string]: boolean } = {};\n    private static supports: { [key: string]: boolean } = {};\n\n    /**\n     * If the key was passed before, then doesn't execute the func\n     * @param {Function} func\n     * @param {string} key\n     */\n    static doOnce(func: () => void, key: string) {\n        if (this.doOnceFlags[key]) {\n            return;\n        }\n        func();\n        this.doOnceFlags[key] = true;\n    }\n\n    static getMaxSafeInteger(): number {\n        // eslint-disable-next-line\n        if (!Number.MAX_SAFE_INTEGER) {\n            return 9007199254740991;\n        }\n        // eslint-disable-next-line\n        return Number.MAX_SAFE_INTEGER;\n    }\n\n    static isEventSupported = (() => {\n        const tags = {\n            select: 'input',\n            change: 'input',\n            submit: 'form',\n            reset: 'form',\n            error: 'img',\n            load: 'img',\n            abort: 'img'\n        } as any;\n\n        const isEventSupported = (eventName: any) => {\n            if (typeof Utils.supports[eventName] === 'boolean') {\n                return Utils.supports[eventName];\n            }\n            let el = document.createElement(tags[eventName] || 'div');\n            eventName = 'on' + eventName;\n\n            let isSupported = (eventName in el);\n\n            if (!isSupported) {\n                el.setAttribute(eventName, 'return;');\n                isSupported = typeof el[eventName] == 'function';\n            }\n            el = null;\n\n            return Utils.supports[eventName] = isSupported;\n        };\n\n        return isEventSupported;\n    })();\n\n    /**\n     * Checks if event was issued by a left click\n     * from https://stackoverflow.com/questions/3944122/detect-left-mouse-button-press\n     * @param {MouseEvent} mouseEvent\n     * @returns {boolean}\n     */\n    static isLeftClick(mouseEvent: MouseEvent): boolean {\n        if (\"buttons\" in mouseEvent) {\n            return mouseEvent.buttons == 1;\n        }\n        const button = (mouseEvent as any).which || (mouseEvent as any).button;\n        return button == 1;\n    }\n\n    /**\n     * `True` if the event is close to the original event by X pixels either vertically or horizontally.\n     * we only start dragging after X pixels so this allows us to know if we should start dragging yet.\n     * @param {MouseEvent | TouchEvent} e1\n     * @param {MouseEvent | TouchEvent} e2\n     * @param {number} pixelCount\n     * @returns {boolean}\n     */\n    static areEventsNear(e1: MouseEvent | Touch, e2: MouseEvent | Touch, pixelCount: number): boolean {\n        // by default, we wait 4 pixels before starting the drag\n        if (pixelCount === 0) {\n            return false;\n        }\n        const diffX = Math.abs(e1.clientX - e2.clientX);\n        const diffY = Math.abs(e1.clientY - e2.clientY);\n\n        return Math.max(diffX, diffY) <= pixelCount;\n    }\n\n    static jsonEquals(val1: any, val2: any): boolean {\n        const val1Json = val1 ? JSON.stringify(val1) : null;\n        const val2Json = val2 ? JSON.stringify(val2) : null;\n\n        return val1Json === val2Json;\n    }\n\n    static shallowCompare(arr1: any[], arr2: any[]): boolean {\n        // if both are missing, then they are the same\n        if (this.missing(arr1) && this.missing(arr2)) {\n            return true;\n        }\n\n        // if one is present, but other is missing, then they are different\n        if (this.missing(arr1) || this.missing(arr2)) {\n            return false;\n        }\n\n        if (arr1.length !== arr2.length) {\n            return false;\n        }\n\n        for (let i = 0; i < arr1.length; i++) {\n            if (arr1[i] !== arr2[i]) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    static getNameOfClass(theClass: any) {\n        const funcNameRegex = /function (.{1,})\\(/;\n        const funcAsString = theClass.toString();\n        const results = funcNameRegex.exec(funcAsString);\n\n        return results && results.length > 1 ? results[1] : \"\";\n    }\n\n    static areEqual = <T>(a: T[], b: T[]): boolean => {\n        return a.length === b.length && a.every((value, index) => b[index] === value);\n    }\n\n    static keys = <T>(map: Map<T, any>): T[] => {\n        const keys: T[] = [];\n\n        map.forEach((_, key) => keys.push(key));\n\n        return keys;\n    }\n\n    static values = <T>(object: { [key: string]: T }): T[] => Object.keys(object).map(key => object[key]);\n\n    static includes = <T>(array: T[], value: T): boolean => array.indexOf(value) > -1;\n\n    static getValueUsingField(data: any, field: string, fieldContainsDots: boolean): any {\n        if (!field || !data) {\n            return;\n        }\n\n        // if no '.', then it's not a deep value\n        if (!fieldContainsDots) {\n            return data[field];\n        } else {\n            // otherwise it is a deep value, so need to dig for it\n            const fields = field.split('.');\n            let currentObject = data;\n\n            for (let i = 0; i < fields.length; i++) {\n                currentObject = currentObject[fields[i]];\n\n                if (this.missing(currentObject)) {\n                    return null;\n                }\n            }\n\n            return currentObject;\n        }\n    }\n\n    static getElementSize(el: HTMLElement): {\n        height: number,\n        width: number,\n        paddingTop: number,\n        paddingRight: number,\n        paddingBottom: number,\n        paddingLeft: number,\n        marginTop: number,\n        marginRight: number,\n        marginBottom: number,\n        marginLeft: number,\n        boxSizing: string\n    } {\n        const {\n            height,\n            width,\n            paddingTop,\n            paddingRight,\n            paddingBottom,\n            paddingLeft,\n            marginTop,\n            marginRight,\n            marginBottom,\n            marginLeft,\n            boxSizing\n        } = window.getComputedStyle(el);\n\n        return {\n            height: parseFloat(height),\n            width: parseFloat(width),\n            paddingTop: parseFloat(paddingTop),\n            paddingRight: parseFloat(paddingRight),\n            paddingBottom: parseFloat(paddingBottom),\n            paddingLeft: parseFloat(paddingLeft),\n            marginTop: parseFloat(marginTop),\n            marginRight: parseFloat(marginRight),\n            marginBottom: parseFloat(marginBottom),\n            marginLeft: parseFloat(marginLeft),\n            boxSizing\n        };\n    }\n\n    static getInnerHeight(el: HTMLElement): number {\n        const size = this.getElementSize(el);\n\n        if (size.boxSizing === 'border-box') {\n            return size.height - size.paddingTop - size.paddingBottom;\n        }\n\n        return size.height;\n    }\n\n    static getInnerWidth(el: HTMLElement): number {\n        const size = this.getElementSize(el);\n\n        if (size.boxSizing === 'border-box') {\n            return size.width - size.paddingLeft - size.paddingRight;\n        }\n\n        return size.width;\n    }\n\n    static getAbsoluteHeight(el: HTMLElement): number {\n        const size = this.getElementSize(el);\n        const marginRight = size.marginBottom + size.marginTop;\n\n        return Math.ceil(el.offsetHeight + marginRight);\n    }\n\n    static getAbsoluteWidth(el: HTMLElement): number {\n        const size = this.getElementSize(el);\n        const marginWidth = size.marginLeft + size.marginRight;\n\n        return Math.ceil(el.offsetWidth + marginWidth);\n    }\n\n    static getScrollLeft(element: HTMLElement, rtl: boolean): number {\n        let scrollLeft = element.scrollLeft;\n        if (rtl) {\n            // Absolute value - for FF that reports RTL scrolls in negative numbers\n            scrollLeft = Math.abs(scrollLeft);\n\n            // Get Chrome to return the same value as well\n            if (this.isBrowserChrome()) {\n                scrollLeft = element.scrollWidth - element.clientWidth - scrollLeft;\n            }\n        }\n        return scrollLeft;\n    }\n\n    static cleanNumber(value: any): number {\n        if (typeof value === 'string') {\n            value = parseInt(value, 10);\n        }\n        if (typeof value === 'number') {\n            value = Math.floor(value);\n        } else {\n            value = null;\n        }\n        return value;\n    }\n\n    static compose = (...fns: Function[]) => (arg: any) => fns.reduce((composed, f) => f(composed), arg);\n\n    static decToHex = (number: number, bytes: number): string => {\n        let hex = '';\n\n        for (let i = 0; i < bytes; i++) {\n            hex += String.fromCharCode(number & 0xff);\n            number >>>= 8;\n        }\n\n        return hex;\n    }\n\n    /**\n     * It encodes any string in UTF-8 format\n     * taken from https://github.com/mathiasbynens/utf8.js\n     * @param {string} s\n     * @returns {string}\n     */\n    static utf8_encode = (s: string): string => {\n        const stringFromCharCode = String.fromCharCode;\n\n        function ucs2decode(string: string) {\n            const output = [];\n            let counter = 0;\n            const length = string.length;\n            let value;\n            let extra;\n\n            while (counter < length) {\n                value = string.charCodeAt(counter++);\n                if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n                    // high surrogate, and there is a next character\n                    extra = string.charCodeAt(counter++);\n                    if ((extra & 0xFC00) == 0xDC00) { // low surrogate\n                        output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n                    } else {\n                        // unmatched surrogate; only append this code unit, in case the next\n                        // code unit is the high surrogate of a surrogate pair\n                        output.push(value);\n                        counter--;\n                    }\n                } else {\n                    output.push(value);\n                }\n            }\n            return output;\n        }\n\n        function checkScalarValue(codePoint: number) {\n            if (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n                throw Error(\n                    'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n                    ' is not a scalar value'\n                );\n            }\n        }\n\n        function createByte(codePoint: number, shift: number) {\n            return stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n        }\n\n        function encodeCodePoint(codePoint: number) {\n            if ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n                return stringFromCharCode(codePoint);\n            }\n            let symbol = '';\n\n            if ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n                symbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n            } else if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n                checkScalarValue(codePoint);\n                symbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n                symbol += createByte(codePoint, 6);\n            } else if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n                symbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n                symbol += createByte(codePoint, 12);\n                symbol += createByte(codePoint, 6);\n            }\n            symbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n            return symbol;\n        }\n\n        const codePoints = ucs2decode(s);\n        const length = codePoints.length;\n        let index = -1;\n        let codePoint;\n        let byteString = '';\n\n        while (++index < length) {\n            codePoint = codePoints[index];\n            byteString += encodeCodePoint(codePoint);\n        }\n        return byteString;\n    }\n\n    static setScrollLeft(element: HTMLElement, value: number, rtl: boolean): void {\n        if (rtl) {\n            // Chrome and Safari when doing RTL have the END position of the scroll as zero, not the start\n            if (this.isBrowserSafari() || this.isBrowserChrome()) {\n                value = element.scrollWidth - element.clientWidth - value;\n            }\n            // Firefox uses negative numbers when doing RTL scrolling\n            if (this.isBrowserFirefox()) {\n                value *= -1;\n            }\n        }\n        element.scrollLeft = value;\n    }\n\n    static iterateNamedNodeMap(map: NamedNodeMap, callback: (key: string, value: string) => void): void {\n        if (!map) {\n            return;\n        }\n        for (let i = 0; i < map.length; i++) {\n            const attr = map[i];\n            callback(attr.name, attr.value);\n        }\n    }\n\n    static iterateObject<T>(object: { [p: string]: T } | T[] | undefined, callback: (key: string, value: T) => void) {\n        if (!object || this.missing(object)) {\n            return;\n        }\n\n        if (Array.isArray(object)) {\n            object.forEach((value, index) => callback(`${index}`, value));\n        } else {\n            Object.keys(object).forEach(key => callback(key, object[key]));\n        }\n    }\n\n    static cloneObject<T>(object: T): T {\n        const copy = {} as T;\n        const keys = Object.keys(object);\n        for (let i = 0; i < keys.length; i++) {\n            const key = keys[i];\n            const value = (object as any)[key];\n            (copy as any)[key] = value;\n        }\n        return copy;\n    }\n\n    static deepCloneObject = <T>(object: T): T => JSON.parse(JSON.stringify(object));\n\n    static getProperty = <T, K extends keyof T>(object: T, key: K): any => object[key];\n    static setProperty = <T, K extends keyof T>(object: T, key: K, value: any): void => object[key] = value;\n\n    /**\n     * Will copy the specified properties from `source` into the equivalent properties on `target`, ignoring properties with\n     * a value of `undefined`.\n     */\n    static copyPropertiesIfPresent<S, T extends S, K extends keyof S>(source: S, target: T, ...properties: K[]) {\n        properties.forEach(p => this.copyPropertyIfPresent(source, target, p));\n    }\n\n    /**\n     * Will copy the specified property from `source` into the equivalent property on `target`, unless the property has a\n     * value of `undefined`. If a transformation is provided, it will be applied to the value before being set on `target`.\n     */\n    static copyPropertyIfPresent<S, T extends S, K extends keyof S>(source: S, target: T, property: K, transform?: (value: S[K]) => any) {\n        const value = this.getProperty(source, property);\n\n        if (value !== undefined) {\n            this.setProperty(target, property, transform ? transform(value) : value);\n        }\n    }\n\n    static getAllKeysInObjects(objects: any[]): string[] {\n        const allValues: any = {};\n        objects.forEach(obj => {\n            if (obj) {\n                Object.keys(obj).forEach(key => allValues[key] = null);\n            }\n        });\n        return Object.keys(allValues);\n    }\n\n    static mergeDeep(dest: any, source: any, copyUndefined = true): void {\n        if (!this.exists(source)) {\n            return;\n        }\n\n        this.iterateObject(source, (key: string, newValue: any) => {\n            const oldValue: any = dest[key];\n\n            if (oldValue === newValue) {\n                return;\n            }\n\n            if (typeof oldValue === 'object' && typeof newValue === 'object' && !Array.isArray(oldValue)) {\n                Utils.mergeDeep(oldValue, newValue);\n            } else if (copyUndefined || newValue !== undefined) {\n                dest[key] = newValue;\n            }\n        });\n    }\n\n    static assign(object: any, ...sources: any[]): any {\n        sources.forEach(source => {\n            if (this.exists(source)) {\n                this.iterateObject(source, function(key: string, value: any) {\n                    object[key] = value;\n                });\n            }\n        });\n\n        return object;\n    }\n\n    static flatten(arrayOfArrays: any[]) {\n        return [].concat.apply([], arrayOfArrays);\n    }\n\n    static parseYyyyMmDdToDate(yyyyMmDd: string, separator: string): Date | null {\n        try {\n            if (!yyyyMmDd) {\n                return null;\n            }\n            if (yyyyMmDd.indexOf(separator) === -1) {\n                return null;\n            }\n\n            const fields: string[] = yyyyMmDd.split(separator);\n            if (fields.length != 3) {\n                return null;\n            }\n            return new Date(Number(fields[0]), Number(fields[1]) - 1, Number(fields[2]));\n        } catch (e) {\n            return null;\n        }\n    }\n\n    static serializeDateToYyyyMmDd(date: Date, separator: string): string | null {\n        if (!date) {\n            return null;\n        }\n        return date.getFullYear() + separator + this.padStart(date.getMonth() + 1, 2) + separator + this.padStart(date.getDate(), 2);\n    }\n\n    static padStart(num: number, totalStringSize: number): string {\n        let asString: string = num + \"\";\n        while (asString.length < totalStringSize) {\n            asString = \"0\" + asString;\n        }\n        return asString;\n    }\n\n    static pushAll(target: any[], source: any[]): void {\n        if (this.missing(source) || this.missing(target)) {\n            return;\n        }\n        source.forEach(func => target.push(func));\n    }\n\n    static createArrayOfNumbers(first: number, last: number): number[] {\n        const result: number[] = [];\n        for (let i = first; i <= last; i++) {\n            result.push(i);\n        }\n        return result;\n    }\n\n    static getFunctionParameters(func: any) {\n        const fnStr = func.toString().replace(FUNCTION_STRIP_COMMENTS, '');\n        const result = fnStr.slice(fnStr.indexOf('(') + 1, fnStr.indexOf(')')).match(FUNCTION_ARGUMENT_NAMES);\n        if (result === null) {\n            return [];\n        } else {\n            return result;\n        }\n    }\n\n    static find<T>(collection: T[] | { [id: string]: T }, predicate: string | boolean | ((item: T) => boolean), value?: any): T | null {\n        if (collection === null || collection === undefined) {\n            return null;\n        }\n\n        if (!Array.isArray(collection)) {\n            const objToArray = this.values(collection);\n            return this.find(objToArray, predicate, value);\n        }\n\n        const collectionAsArray = collection as T[];\n\n        let firstMatchingItem: T | null = null;\n        for (let i = 0; i < collectionAsArray.length; i++) {\n            const item: T = collectionAsArray[i];\n            if (typeof predicate === 'string') {\n                if ((item as any)[predicate] === value) {\n                    firstMatchingItem = item;\n                    break;\n                }\n            } else {\n                const callback = predicate as (item: T) => boolean;\n                if (callback(item)) {\n                    firstMatchingItem = item;\n                    break;\n                }\n            }\n        }\n        return firstMatchingItem;\n    }\n\n    static toStrings<T>(array: T[]): (string | null)[] {\n        return array.map(item => {\n            if (item === undefined || item === null || !item.toString) {\n                return null;\n            } else {\n                return item.toString();\n            }\n        });\n    }\n\n    static findIndex<T>(collection: T[], predicate: (item: T, idx: number, collection: T[]) => boolean): number {\n        for (let i = 0; i < collection.length; i++) {\n            if (predicate(collection[i], i, collection)) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n    /**\n     * Returns true if it is a DOM node\n     * taken from: http://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object\n     * @param {any} o\n     * @return {boolean}\n     */\n    static isNode(o: any): boolean {\n        return (\n            typeof Node === \"function\" ? o instanceof Node :\n                o && typeof o === \"object\" && typeof o.nodeType === \"number\" && typeof o.nodeName === \"string\"\n        );\n    }\n\n    //\n    /**\n     * Returns true if it is a DOM element\n     * taken from: http://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object\n     * @param {any} o\n     * @returns {boolean}\n     */\n    static isElement(o: any): boolean {\n        return (\n            typeof HTMLElement === \"function\" ? o instanceof HTMLElement : //DOM2\n                o && typeof o === \"object\" && o !== null && o.nodeType === 1 && typeof o.nodeName === \"string\"\n        );\n    }\n\n    static isNodeOrElement(o: any) {\n        return this.isNode(o) || this.isElement(o);\n    }\n\n    /**\n     * Makes a copy of a node list into a list\n     * @param {NodeList} nodeList\n     * @returns {Node[]}\n     */\n    static copyNodeList(nodeList: NodeList): Node[] {\n        const childCount = nodeList ? nodeList.length : 0;\n        const res: Node[] = [];\n        for (let i = 0; i < childCount; i++) {\n            res.push(nodeList[i]);\n        }\n        return res;\n    }\n\n    static isEventFromPrintableCharacter(event: KeyboardEvent): boolean {\n        const pressedChar = String.fromCharCode(event.charCode);\n\n        // newline is an exception, as it counts as a printable character, but we don't\n        // want to start editing when it is pressed. without this check, if user is in chrome\n        // and editing a cell, and they press ctrl+enter, the cell stops editing, and then\n        // starts editing again with a blank value (two 'key down' events are fired). to\n        // test this, remove the line below, edit a cell in chrome and hit ctrl+enter while editing.\n        // https://ag-grid.atlassian.net/browse/AG-605\n        if (this.isKeyPressed(event, Constants.KEY_NEW_LINE)) {\n            return false;\n        }\n\n        // no allowed printable chars have alt or ctrl key combinations\n        if (event.altKey || event.ctrlKey) {\n            return false;\n        }\n\n        if (_.exists(event.key)) {\n            // modern browser will implement key, so we return if key is length 1, eg if it is 'a' for the\n            // a key, or '2' for the '2' key. non-printable characters have names, eg 'Enter' or 'Backspace'.\n            const printableCharacter = event.key.length === 1;\n\n            // IE11 & Edge treat the numpad del key differently - with numlock on we get \"Del\" for key,\n            // so this addition checks if its IE11/Edge and handles that specific case the same was as all other browsers\n            const numpadDelWithNumlockOnForEdgeOrIe = Utils.isNumpadDelWithNumlockOnForEdgeOrIe(event);\n\n            return printableCharacter || numpadDelWithNumlockOnForEdgeOrIe;\n        } else {\n            // otherwise, for older browsers, we test against a list of characters, which doesn't include\n            // accents for non-English, but don't care much, as most users are on modern browsers\n            return Utils.PRINTABLE_CHARACTERS.indexOf(pressedChar) >= 0;\n        }\n    }\n\n    /**\n     * Allows user to tell the grid to skip specific keyboard events\n     * @param {GridOptionsWrapper} gridOptionsWrapper\n     * @param {KeyboardEvent} keyboardEvent\n     * @param {RowNode} rowNode\n     * @param {Column} column\n     * @param {boolean} editing\n     * @returns {boolean}\n     */\n    static isUserSuppressingKeyboardEvent(\n        gridOptionsWrapper: GridOptionsWrapper,\n        keyboardEvent: KeyboardEvent,\n        rowNode: RowNode,\n        column: Column,\n        editing: boolean\n    ): boolean {\n\n        const gridOptionsFunc = gridOptionsWrapper.getSuppressKeyboardEventFunc();\n        const colDefFunc = column.getColDef().suppressKeyboardEvent;\n\n        // if no callbacks provided by user, then do nothing\n        if (!gridOptionsFunc && !colDefFunc) {\n            return false;\n        }\n\n        const params: SuppressKeyboardEventParams = {\n            event: keyboardEvent,\n            editing,\n            column,\n            api: gridOptionsWrapper.getApi(),\n            node: rowNode,\n            data: rowNode.data,\n            colDef: column.getColDef(),\n            context: gridOptionsWrapper.getContext(),\n            columnApi: gridOptionsWrapper.getColumnApi()\n        };\n\n        // colDef get first preference on suppressing events\n        if (colDefFunc) {\n            const colDefFuncResult = colDefFunc(params);\n            // if colDef func suppressed, then return now, no need to call gridOption func\n            if (colDefFuncResult) { return true; }\n        }\n\n        if (gridOptionsFunc) {\n            // if gridOption func, return the result\n            return gridOptionsFunc(params);\n        } else {\n            // otherwise return false, don't suppress, as colDef didn't suppress and no func on gridOptions\n            return false;\n        }\n    }\n\n    static getCellCompForEvent(gridOptionsWrapper: GridOptionsWrapper, event: Event): CellComp {\n        let sourceElement = this.getTarget(event);\n\n        while (sourceElement) {\n            const renderedCell = gridOptionsWrapper.getDomData(sourceElement, 'cellComp');\n            if (renderedCell) {\n                return renderedCell as CellComp;\n            }\n            sourceElement = sourceElement.parentElement;\n        }\n\n        return null;\n    }\n\n    /**\n     * Adds all type of change listeners to an element, intended to be a text field\n     * @param {HTMLElement} element\n     * @param {EventListener} listener\n     */\n    static addChangeListener(element: HTMLElement, listener: EventListener) {\n        element.addEventListener(\"changed\", listener);\n        element.addEventListener(\"paste\", listener);\n        element.addEventListener(\"input\", listener);\n        // IE doesn't fire changed for special keys (eg delete, backspace), so need to\n        // listen for this further ones\n        element.addEventListener(\"keydown\", listener);\n        element.addEventListener(\"keyup\", listener);\n    }\n\n    /**\n     * If value is undefined, null or blank, returns null, otherwise returns the value\n     * @param {T} value\n     * @returns {T | null}\n     */\n    static makeNull<T>(value: T): T | null {\n        const valueNoType = value as any;\n\n        if (value === null || value === undefined || valueNoType === \"\") {\n            return null;\n        }\n\n        return value;\n    }\n\n    static missing(value: any): boolean {\n        return !this.exists(value);\n    }\n\n    static missingOrEmpty(value: any[] | string | undefined): boolean {\n        return !value || this.missing(value) || value.length === 0;\n    }\n\n    static missingOrEmptyObject(value: any): boolean {\n        return this.missing(value) || Object.keys(value).length === 0;\n    }\n\n    static exists(value: any, allowEmptyString: boolean = false): boolean {\n        return value != null && (value !== '' || allowEmptyString);\n    }\n\n    static firstExistingValue<A>(...values: A[]): A | null {\n        for (let i = 0; i < values.length; i++) {\n            const value: A = values[i];\n            if (_.exists(value)) {\n                return value;\n            }\n        }\n\n        return null;\n    }\n\n    static anyExists(values: any[]): boolean {\n        if (values) {\n            for (let i = 0; i < values.length; i++) {\n                if (this.exists(values[i])) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    static existsAndNotEmpty(value?: any[] | null): boolean {\n        return value != null && this.exists(value) && value.length > 0;\n    }\n\n    static clearElement(el: HTMLElement): void {\n        while (el && el.firstChild) { el.removeChild(el.firstChild); }\n    }\n\n    static removeElement(parent: HTMLElement, cssSelector: string) {\n        this.removeFromParent(parent.querySelector(cssSelector));\n    }\n\n    static removeFromParent(node: Element | null) {\n        if (node && node.parentNode) {\n            node.parentNode.removeChild(node);\n        }\n    }\n\n    static isVisible(element: HTMLElement) {\n        return (element.offsetParent !== null);\n    }\n\n    static callIfPresent(func: Function): void {\n        if (func) {\n            func();\n        }\n    }\n\n    /**\n     * Loads the template and returns it as an element. makes up for no simple way in\n     * the dom api to load html directly, eg we cannot do this: document.createElement(template)\n     * @param {string} template\n     * @returns {HTMLElement}\n     */\n    static loadTemplate(template: string): HTMLElement {\n        const tempDiv = document.createElement(\"div\");\n        tempDiv.innerHTML = template;\n        return tempDiv.firstChild as HTMLElement;\n    }\n\n    static appendHtml(eContainer: HTMLElement, htmlTemplate: string) {\n        if (eContainer.lastChild) {\n            // https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML\n            // we put the items at the start, so new items appear underneath old items,\n            // so when expanding/collapsing groups, the new rows don't go on top of the\n            // rows below that are moving our of the way\n            eContainer.insertAdjacentHTML('afterbegin', htmlTemplate);\n        } else {\n            eContainer.innerHTML = htmlTemplate;\n        }\n    }\n\n    static addOrRemoveCssClass(element: HTMLElement, className: string, addOrRemove: boolean) {\n        if (addOrRemove) {\n            this.addCssClass(element, className);\n        } else {\n            this.removeCssClass(element, className);\n        }\n    }\n\n    /**\n     * This method adds a class to an element and remove that class from all siblings.\n     * Useful for toggling state.\n     * @param {HTMLElement} element The element to receive the class\n     * @param {string} className The class to be assigned to the element\n     * @param {boolean} [inverted] This inverts the effect, adding the class to all siblings and\n     *        removing from the relevant element (useful when adding a class to hide non-selected elements).\n     */\n    static radioCssClass(element: HTMLElement, className: string, inverted?: boolean) {\n        const parent = element.parentElement;\n\n        let sibling = parent.firstChild as HTMLElement;\n\n        while (sibling) {\n            _.addOrRemoveCssClass(\n                sibling,\n                className,\n                inverted ? (sibling !== element) : (sibling === element)\n            );\n            sibling = sibling.nextSibling as HTMLElement;\n        }\n    }\n\n    static addCssClass(element: HTMLElement, className: string) {\n        if (!className || className.length === 0) {\n            return;\n        }\n\n        if (className.indexOf(' ') >= 0) {\n            className.split(' ').forEach(value => this.addCssClass(element, value));\n            return;\n        }\n\n        if (element.classList) {\n            element.classList.add(className);\n        } else if (element.className && element.className.length > 0) {\n            const cssClasses = element.className.split(' ');\n\n            if (cssClasses.indexOf(className) < 0) {\n                cssClasses.push(className);\n                element.setAttribute('class', cssClasses.join(' '));\n            }\n        } else {\n            // do not use element.classList = className here, it will cause\n            // a read-only assignment error on some browsers (IE/Edge).\n            element.setAttribute('class', className);\n        }\n    }\n\n    static removeCssClass(element: HTMLElement, className: string) {\n        if (element.classList) {\n            element.classList.remove(className);\n        } else if (element.className && element.className.length > 0) {\n            const newClassName = element.className.split(' ').filter(c => c !== className).join(' ');\n\n            element.setAttribute('class', newClassName);\n        }\n    }\n\n    static containsClass(element: any, className: string): boolean {\n        if (element.classList) {\n            // for modern browsers\n            return element.classList.contains(className);\n        } else if (element.className) {\n            // for older browsers, check against the string of class names\n            // if only one class, can check for exact match\n            const onlyClass = element.className === className;\n            // if many classes, check for class name, we have to pad with ' ' to stop other\n            // class names that are a substring of this class\n            const contains = element.className.indexOf(' ' + className + ' ') >= 0;\n            // the padding above then breaks when it's the first or last class names\n            const startsWithClass = element.className.indexOf(className + ' ') === 0;\n            const endsWithClass = element.className.lastIndexOf(' ' + className) === (element.className.length - className.length - 1);\n            return onlyClass || contains || startsWithClass || endsWithClass;\n        } else {\n            // if item is not a node\n            return false;\n        }\n    }\n\n    static getElementAttribute(element: any, attributeName: string): string | null {\n        if (element.attributes && element.attributes[attributeName]) {\n            const attribute = element.attributes[attributeName];\n            return attribute.value;\n        } else {\n            return null;\n        }\n    }\n\n    static offsetHeight(element: HTMLElement) {\n        return element && element.clientHeight ? element.clientHeight : 0;\n    }\n\n    static offsetWidth(element: HTMLElement) {\n        return element && element.clientWidth ? element.clientWidth : 0;\n    }\n\n    static sortNumerically(array: number[]): number[] {\n        return array.sort((a, b) => a - b);\n    }\n\n    static removeRepeatsFromArray<T>(array: T[], object: T) {\n        if (!array) {\n            return;\n        }\n        for (let index = array.length - 2; index >= 0; index--) {\n            const thisOneMatches = array[index] === object;\n            const nextOneMatches = array[index + 1] === object;\n            if (thisOneMatches && nextOneMatches) {\n                array.splice(index + 1, 1);\n            }\n        }\n    }\n\n    static removeFromArray<T>(array: T[], object: T) {\n        const index = array.indexOf(object);\n        if (index >= 0) {\n            array.splice(index, 1);\n        }\n    }\n\n    static removeAllFromArray<T>(array: T[], toRemove: T[]) {\n        toRemove.forEach(item => this.removeFromArray(array, item));\n    }\n\n    static insertIntoArray<T>(array: T[], object: T, toIndex: number) {\n        array.splice(toIndex, 0, object);\n    }\n\n    static insertArrayIntoArray<T>(dest: T[], src: T[], toIndex: number) {\n        if (this.missing(dest) || this.missing(src)) {\n            return;\n        }\n        // put items in backwards, otherwise inserted items end up in reverse order\n        for (let i = src.length - 1; i >= 0; i--) {\n            const item = src[i];\n            this.insertIntoArray(dest, item, toIndex);\n        }\n    }\n\n    static moveInArray<T>(array: T[], objectsToMove: T[], toIndex: number) {\n        // first take out it items from the array\n        objectsToMove.forEach((obj) => {\n            this.removeFromArray(array, obj);\n        });\n\n        // now add the objects, in same order as provided to us, that means we start at the end\n        // as the objects will be pushed to the right as they are inserted\n        objectsToMove.slice().reverse().forEach((obj) => {\n            this.insertIntoArray(array, obj, toIndex);\n        });\n    }\n\n    static defaultComparator(valueA: any, valueB: any, accentedCompare: boolean = false): number {\n        const valueAMissing = valueA === null || valueA === undefined;\n        const valueBMissing = valueB === null || valueB === undefined;\n\n        // this is for aggregations sum and avg, where the result can be a number that is wrapped.\n        // if we didn't do this, then the toString() value would be used, which would result in\n        // the strings getting used instead of the numbers.\n        if (valueA && valueA.toNumber) {\n            valueA = valueA.toNumber();\n        }\n        if (valueB && valueB.toNumber) {\n            valueB = valueB.toNumber();\n        }\n\n        if (valueAMissing && valueBMissing) {\n            return 0;\n        }\n        if (valueAMissing) {\n            return -1;\n        }\n        if (valueBMissing) {\n            return 1;\n        }\n\n        if (typeof valueA === \"string\") {\n            if (!accentedCompare) {\n                return doQuickCompare(valueA, valueB);\n            } else {\n                try {\n                    // using local compare also allows chinese comparisons\n                    return valueA.localeCompare(valueB);\n                } catch (e) {\n                    // if something wrong with localeCompare, eg not supported\n                    // by browser, then just continue with the quick one\n                    return doQuickCompare(valueA, valueB);\n                }\n            }\n\n        }\n\n        if (valueA < valueB) {\n            return -1;\n        } else if (valueA > valueB) {\n            return 1;\n        } else {\n            return 0;\n        }\n\n        function doQuickCompare(a: string, b: string): number {\n            return (a > b ? 1 : (a < b ? -1 : 0));\n        }\n    }\n\n    static last<T>(arr: T[]): T | undefined {\n        if (!arr || !arr.length) { return undefined; }\n\n        return arr[arr.length - 1];\n    }\n\n    static compareArrays(array1: any[] | undefined, array2: any[]): boolean {\n        if (this.missing(array1) && this.missing(array2)) {\n            return true;\n        }\n        if ((this.missing(array1) || this.missing(array2)) ||\n            (!array1 || !array2)) {\n            return false;\n        }\n        if (array1.length !== array2.length) {\n            return false;\n        }\n        for (let i = 0; i < array1.length; i++) {\n            if (array1[i] !== array2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    static ensureDomOrder(eContainer: HTMLElement, eChild: HTMLElement, eChildBefore: HTMLElement): void {\n        // if already in right order, do nothing\n        if (eChildBefore && eChildBefore.nextSibling === eChild) {\n            return;\n        }\n\n        if (eChildBefore) {\n            if (eChildBefore.nextSibling) {\n                // insert between the eRowBefore and the row after it\n                eContainer.insertBefore(eChild, eChildBefore.nextSibling);\n            } else {\n                // if nextSibling is missing, means other row is at end, so just append new row at the end\n                eContainer.appendChild(eChild);\n            }\n        } else {\n            // otherwise put at start\n            if (eContainer.firstChild && eContainer.firstChild !== eChild) {\n                // insert it at the first location\n                eContainer.insertAdjacentElement('afterbegin', eChild);\n            }\n        }\n    }\n\n    static setDomChildOrder(eContainer: HTMLElement, orderedChildren: HTMLElement[]): void {\n        for (let i = 0; i < orderedChildren.length; i++) {\n            const correctCellAtIndex = orderedChildren[i];\n            const actualCellAtIndex = eContainer.children[i];\n            if (actualCellAtIndex !== correctCellAtIndex) {\n                eContainer.insertBefore(correctCellAtIndex, actualCellAtIndex);\n            }\n        }\n    }\n\n    static insertTemplateWithDomOrder(eContainer: HTMLElement,\n        htmlTemplate: string,\n        eChildBefore: HTMLElement): HTMLElement {\n        let res: HTMLElement;\n        if (eChildBefore) {\n            // if previous element exists, just slot in after the previous element\n            eChildBefore.insertAdjacentHTML('afterend', htmlTemplate);\n            res = eChildBefore.nextSibling as HTMLElement;\n        } else {\n            if (eContainer.firstChild) {\n                // insert it at the first location\n                eContainer.insertAdjacentHTML('afterbegin', htmlTemplate);\n            } else {\n                // otherwise eContainer is empty, so just append it\n                eContainer.innerHTML = htmlTemplate;\n            }\n            res = eContainer.firstChild as HTMLElement;\n        }\n        return res;\n    }\n\n    static every<T>(items: T[], callback: (item: T) => boolean): boolean {\n        if (!items || items.length === 0) {\n            return true;\n        }\n\n        for (let i = 0; i < items.length; i++) {\n            if (!callback(items[i])) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    static toStringOrNull(value: any): string | null {\n        if (this.exists(value) && value.toString) {\n            return value.toString();\n        } else {\n            return null;\n        }\n    }\n\n    static formatSize(size: number | string) {\n        if (typeof size === \"number\") {\n            return size + \"px\";\n        } else {\n            return size;\n        }\n    }\n\n    static formatNumberTwoDecimalPlacesAndCommas(value: number | null): string {\n        if (typeof value !== 'number') {\n            return '';\n        }\n\n        // took this from: http://blog.tompawlak.org/number-currency-formatting-javascript\n        return (Math.round(value * 100) / 100).toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\");\n    }\n\n    static findLineByLeastSquares(values: number[]) {\n        const len = values.length;\n\n        if (len <= 1) { return values; }\n\n        let sum_x = 0;\n        let sum_y = 0;\n        let sum_xy = 0;\n        let sum_xx = 0;\n\n        let y = 0;\n\n        for (let x = 0; x < len; x++) {\n            y = values[x];\n            sum_x += x;\n            sum_y += y;\n            sum_xx += x * x;\n            sum_xy += x * y;\n        }\n\n        const m = (len * sum_xy - sum_x * sum_y) / (len * sum_xx - sum_x * sum_x);\n        const b = (sum_y / len) - (m * sum_x) / len;\n\n        const result = [];\n\n        for (let x = 0; x <= len; x++) {\n            result.push(x * m + b);\n        }\n\n        return result;\n    }\n\n    /**\n     * the native method number.toLocaleString(undefined, {minimumFractionDigits: 0})\n     * puts in decimal places in IE, so we use this method instead\n     * from: http://blog.tompawlak.org/number-currency-formatting-javascript\n     * @param {number} value\n     * @returns {string}\n     */\n    static formatNumberCommas(value: number): string {\n        if (typeof value !== 'number') {\n            return '';\n        }\n        return value.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\");\n    }\n\n    static prependDC(parent: HTMLElement, documentFragment: DocumentFragment): void {\n        if (this.exists(parent.firstChild)) {\n            parent.insertBefore(documentFragment, parent.firstChild);\n        } else {\n            parent.appendChild(documentFragment);\n        }\n    }\n\n    //\n    // IMPORTANT NOTE!\n    //\n    // The comments below provide one example of how each icon is used, so that you can find\n    // an instance of it in the UI and see what it looks like in the UI. Many icons are used\n    // in multiple places.\n    //\n\n    static iconNameClassMap: { [key: string]: string } = {\n        // header column group shown when expanded (click to contract)\n        columnGroupOpened: 'expanded',\n        // header column group shown when contracted (click to expand)\n        columnGroupClosed: 'contracted',\n        // tool panel column group contracted (click to expand)\n        columnSelectClosed: 'tree-closed',\n        // tool panel column group expanded (click to contract)\n        columnSelectOpen: 'tree-open',\n        // column tool panel header expand/collapse all button, shown when some children are expanded and\n        //     others are collapsed\n        columnSelectIndeterminate: 'tree-indeterminate',\n        // shown on ghost icon while dragging column to the side of the grid to pin\n        columnMovePin: 'pin',\n        // ??? doesn't seem to be used?\n        columnMoveAdd: 'plus',\n        // shown on ghost icon while dragging over part of the page that is not a drop zone\n        columnMoveHide: 'eye-slash',\n        // shown on ghost icon while dragging columns to reorder\n        columnMoveMove: 'arrows',\n        // animating icon shown when dragging a column to the right of the grid causes horizontal scrolling\n        columnMoveLeft: 'left',\n        // animating icon shown when dragging a column to the left of the grid causes horizontal scrolling\n        columnMoveRight: 'right',\n        // shown on ghost icon while dragging over Row Groups drop zone\n        columnMoveGroup: 'group',\n        // shown on ghost icon while dragging over Values drop zone\n        columnMoveValue: 'aggregation',\n        // shown on ghost icon while dragging over pivot drop zone\n        columnMovePivot: 'pivot',\n        // shown on ghost icon while dragging over drop zone that doesn't support it, e.g.\n        //     string column over aggregation drop zone\n        dropNotAllowed: 'not-allowed',\n        // shown on row group when contracted (click to expand)\n        groupContracted: 'contracted',\n        // shown on row group when expanded (click to contract)\n        groupExpanded: 'expanded',\n        // context menu chart item\n        chart: 'chart',\n        // chart window title bar\n        close: 'cross',\n        // X (remove) on column 'pill' after adding it to a drop zone list\n        cancel: 'cancel',\n        // indicates the currently active pin state in the \"Pin column\" sub-menu of the column menu\n        check: 'tick',\n        // the following checkbox-* items are for checkboxes on themes that don't use a\n        //     native <input type=\"radio\">\n        checkboxChecked: 'checkbox-checked',\n        checkboxUnchecked: 'checkbox-unchecked',\n        checkboxIndeterminate: 'checkbox-indeterminate',\n        checkboxCheckedReadOnly: 'checkbox-checked-readonly',\n        checkboxUncheckedReadOnly: 'checkbox-unchecked-readonly',\n        checkboxIndeterminateReadOnly: 'checkbox-indeterminate-readonly',\n        // \"go to first\" button in pagination controls\n        first: 'first',\n        // \"go to previous\" button in pagination controls\n        previous: 'previous',\n        // \"go to next\" button in pagination controls\n        next: 'next',\n        // \"go to last\" button in pagination controls\n        last: 'last',\n        // shown on top right of chart when chart is linked to range data (click to unlink)\n        linked: 'linked',\n        // shown on top right of chart when chart is not linked to range data (click to link)\n        unlinked: 'unlinked',\n        // \"Choose colour\" button on chart settings tab\n        colorPicker: 'color-picker',\n        // the following radio-button-* items are for radio buttons on themes that don't use a\n        //     native <input type=\"radio\">\n        radioButtonOn: 'radio-button-on',\n        radioButtonOff: 'radio-button-off',\n        // rotating spinner shown by the loading cell renderer\n        groupLoading: 'loading',\n        // ??? doesn't seem to be used?\n        data: 'data',\n        // button to launch enterprise column menu\n        menu: 'menu',\n        // filter tool panel tab\n        filter: 'filter',\n        // column tool panel tab\n        columns: 'columns',\n        // button in chart regular size window title bar (click to maximise)\n        maximize: 'maximize',\n        // button in chart maximised window title bar (click to make regular size)\n        minimize: 'minimize',\n        // \"Pin column\" item in column header menu\n        menuPin: 'pin',\n        // \"Value aggregation\" column menu item (shown on numeric columns when grouping is active)\"\n        menuValue: 'aggregation',\n        // \"Group by {column-name}\" item in column header menu\n        menuAddRowGroup: 'group',\n        // \"Un-Group by {column-name}\" item in column header menu\n        menuRemoveRowGroup: 'group',\n        // context menu copy item\n        clipboardCopy: 'copy',\n        // ??? doesn't seem toi be used?\n        clipboardCut: 'cut',\n        // context menu paste item\n        clipboardPaste: 'paste',\n        // identifies the pivot drop zone\n        pivotPanel: 'pivot',\n        // \"Row groups\" drop zone in column tool panel\n        rowGroupPanel: 'group',\n        // columns tool panel Values drop zone\n        valuePanel: 'aggregation',\n        // drag handle used to pick up draggable columns\n        columnDrag: 'grip',\n        // drag handle used to pick up draggable rows\n        rowDrag: 'grip',\n        // context menu export item\n        save: 'save',\n        // version of small-right used in RTL mode\n        smallLeft: 'small-left',\n        // separater between column 'pills' when you add multiple columns to the header drop zone\n        smallRight: 'small-right',\n        // ??? doesn't seem to be used?\n        smallUp: 'small-up',\n        // ??? doesn't seem to be used?\n        smallDown: 'small-down',\n        // show on column header when column is sorted ascending\n        sortAscending: 'asc',\n        // show on column header when column is sorted descending\n        sortDescending: 'desc',\n        // show on column header when column has no sort, only when enabled with gridOptions.unSortIcon=true\n        sortUnSort: 'none'\n    };\n\n    /**\n     * If icon provided, use this (either a string, or a function callback).\n     * if not, then use the default icon from the theme\n     * @param {string} iconName\n     * @param {GridOptionsWrapper} gridOptionsWrapper\n     * @param {Column | null} [column]\n     * @returns {HTMLElement}\n     */\n    static createIcon(iconName: string, gridOptionsWrapper: GridOptionsWrapper, column: Column | null): HTMLElement {\n        const iconContents = this.createIconNoSpan(iconName, gridOptionsWrapper, column);\n        if (iconContents.className.indexOf('ag-icon') > -1) {\n            return iconContents;\n        } else {\n            const eResult = document.createElement('span');\n            eResult.appendChild(iconContents);\n            return eResult;\n        }\n    }\n\n    static createIconNoSpan(iconName: string, gridOptionsWrapper: GridOptionsWrapper, column?: Column | null, forceCreate?: boolean): HTMLElement {\n        let userProvidedIcon: Function | string | null = null;\n\n        // check col for icon first\n        const icons: any = column && column.getColDef().icons;\n\n        if (icons) {\n            userProvidedIcon = icons[iconName];\n        }\n\n        // if not in col, try grid options\n        if (gridOptionsWrapper && !userProvidedIcon) {\n            const optionsIcons = gridOptionsWrapper.getIcons();\n            if (optionsIcons) {\n                userProvidedIcon = optionsIcons[iconName];\n            }\n        }\n\n        // now if user provided, use it\n        if (userProvidedIcon) {\n            let rendererResult: any;\n            if (typeof userProvidedIcon === 'function') {\n                rendererResult = userProvidedIcon();\n            } else if (typeof userProvidedIcon === 'string') {\n                rendererResult = userProvidedIcon;\n            } else {\n                throw new Error('icon from grid options needs to be a string or a function');\n            }\n            if (typeof rendererResult === 'string') {\n                return this.loadTemplate(rendererResult);\n            } else if (this.isNodeOrElement(rendererResult)) {\n                return rendererResult;\n            } else {\n                console.warn('ag-Grid: iconRenderer should return back a string or a dom object');\n            }\n        } else {\n            const span = document.createElement('span');\n            let cssClass = this.iconNameClassMap[iconName];\n            if (!cssClass) {\n                if (!forceCreate) {\n                    console.warn(`ag-Grid: Did not find icon ${iconName}`);\n                    cssClass = '';\n                } else {\n                    cssClass = iconName;\n                }\n            }\n            span.setAttribute(\"class\", \"ag-icon ag-icon-\" + cssClass);\n            span.setAttribute(\"unselectable\", \"on\");\n            return span;\n        }\n    }\n\n    static addStylesToElement(eElement: any, styles: any) {\n        if (!styles) { return; }\n\n        Object.keys(styles).forEach((key) => {\n            const keyCamelCase = this.hyphenToCamelCase(key);\n            if (keyCamelCase) {\n                eElement.style[keyCamelCase] = styles[key];\n            }\n        });\n    }\n\n    static isHorizontalScrollShowing(element: HTMLElement): boolean {\n        return element.clientWidth < element.scrollWidth;\n    }\n\n    static isVerticalScrollShowing(element: HTMLElement): boolean {\n        return element.clientHeight < element.scrollHeight;\n    }\n\n    static getMaxDivHeight(): number {\n        if (!document.body) {\n            return -1;\n        }\n\n        let res = 1000000;\n        // FF reports the height back but still renders blank after ~6M px\n        const testUpTo = navigator.userAgent.toLowerCase().match(/firefox/) ? 6000000 : 1000000000;\n        const div = this.loadTemplate(\"<div/>\");\n        document.body.appendChild(div);\n        while (true) {\n            const test = res * 2;\n            div.style.height = test + 'px';\n\n            if (test > testUpTo || div.clientHeight !== test) {\n                break;\n            } else {\n                res = test;\n            }\n        }\n\n        document.body.removeChild(div);\n\n        return res;\n    }\n\n    static getScrollbarWidth() {\n        const body = document.body;\n        const div = document.createElement(\"div\");\n\n        div.style.width = div.style.height = \"100px\";\n        div.style.opacity = \"0\";\n        div.style.overflow = \"scroll\";\n        div.style.msOverflowStyle = \"scrollbar\"; // needed for WinJS apps\n        div.style.position = \"absolute\";\n\n        body.appendChild(div);\n\n        const width = div.offsetWidth - div.clientWidth;\n\n        // remove divs\n        if (div.parentNode) {\n            div.parentNode.removeChild(div);\n        }\n\n        return width;\n    }\n\n    static hasOverflowScrolling(): boolean {\n        const prefixes: string[] = ['webkit', 'moz', 'o', 'ms'];\n        const div: HTMLElement = document.createElement('div');\n        const body: HTMLBodyElement = document.getElementsByTagName('body')[0];\n        let found: boolean = false;\n        let p: string;\n\n        body.appendChild(div);\n        div.setAttribute('style', prefixes.map(prefix => `-${prefix}-overflow-scrolling: touch`).concat('overflow-scrolling: touch').join(';'));\n\n        const computedStyle: CSSStyleDeclaration = window.getComputedStyle(div);\n\n        if ((computedStyle as any).overflowScrolling === 'touch') {\n            found = true;\n        }\n\n        if (!found) {\n            for (p of prefixes) {\n                if ((computedStyle as any)[`${p}OverflowScrolling`] === 'touch') {\n                    found = true;\n                    break;\n                }\n            }\n        }\n\n        if (div.parentNode) {\n            div.parentNode.removeChild(div);\n        }\n\n        return found;\n    }\n\n    static isKeyPressed(event: KeyboardEvent, keyToCheck: number) {\n        const pressedKey = event.which || event.keyCode;\n        return pressedKey === keyToCheck;\n    }\n\n    static isCharacterKey(event: KeyboardEvent): boolean {\n        // from: https://stackoverflow.com/questions/4179708/how-to-detect-if-the-pressed-key-will-produce-a-character-inside-an-input-text\n        const { which } = event;\n\n        if (typeof which === 'number' && which) {\n            return !event.ctrlKey && !event.metaKey && !event.altKey && event.which !== 8 && event.which !== 16;\n        }\n\n        return which === undefined;\n    }\n\n    static setDisplayed(element: HTMLElement, displayed: boolean) {\n        this.addOrRemoveCssClass(element, 'ag-hidden', !displayed);\n    }\n\n    static setVisible(element: HTMLElement, visible: boolean) {\n        this.addOrRemoveCssClass(element, 'ag-invisible', !visible);\n    }\n\n    static setElementWidth(element: HTMLElement, width: string | number) {\n        if (width === 'flex') {\n            element.style.width = null;\n            element.style.minWidth = null;\n            element.style.maxWidth = null;\n            element.style.flex = '1 1 auto';\n        } else {\n            this.setFixedWidth(element, width);\n        }\n    }\n\n    static setFixedWidth(element: HTMLElement, width: string | number) {\n        width = this.formatSize(width);\n        element.style.width = width;\n        element.style.maxWidth = width;\n        element.style.minWidth = width;\n    }\n\n    static setElementHeight(element: HTMLElement, height: string | number) {\n        if (height === 'flex') {\n            element.style.height = null;\n            element.style.minHeight = null;\n            element.style.maxHeight = null;\n            element.style.flex = '1 1 auto';\n        } else {\n            this.setFixedHeight(element, height);\n        }\n    }\n\n    static setFixedHeight(element: HTMLElement, height: string | number) {\n        height = this.formatSize(height);\n        element.style.height = height;\n        element.style.maxHeight = height;\n        element.style.minHeight = height;\n    }\n\n    static isBrowserIE(): boolean {\n        if (this.isIE === undefined) {\n            this.isIE = /*@cc_on!@*/false || !!(document as any).documentMode; // At least IE6\n        }\n        return this.isIE;\n    }\n\n    static isBrowserEdge(): boolean {\n        if (this.isEdge === undefined) {\n            this.isEdge = !this.isBrowserIE() && !!(window as any).StyleMedia;\n        }\n        return this.isEdge;\n    }\n\n    static isBrowserSafari(): boolean {\n        if (this.isSafari === undefined) {\n            const anyWindow = window as any;\n            // taken from https://github.com/ag-grid/ag-grid/issues/550\n            this.isSafari = Object.prototype.toString.call(anyWindow.HTMLElement).indexOf('Constructor') > 0\n                || (function(p) {\n                    return p ? p.toString() === \"[object SafariRemoteNotification]\" : false;\n                })\n                    (!anyWindow.safari || anyWindow.safari.pushNotification);\n        }\n        return this.isSafari;\n    }\n\n    static isBrowserChrome(): boolean {\n        if (this.isChrome === undefined) {\n            const win = window as any;\n            this.isChrome = (!!win.chrome && (!!win.chrome.webstore || !!win.chrome.runtime)) ||\n                (/Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor));\n        }\n        return this.isChrome;\n    }\n\n    static isBrowserFirefox(): boolean {\n        if (this.isFirefox === undefined) {\n            const win = window as any;\n            this.isFirefox = typeof win.InstallTrigger !== 'undefined';\n        }\n        return this.isFirefox;\n    }\n\n    static isIOSUserAgent(): boolean {\n        if (this.isIOS === undefined) {\n            // taken from https://stackoverflow.com/a/58064481/1388233\n            this.isIOS = (/iPad|iPhone|iPod/.test(navigator.platform) ||\n                // eslint-disable-next-line\n                (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)) &&\n                !window.MSStream;\n        }\n        return this.isIOS;\n    }\n\n    /**\n     * srcElement is only available in IE. In all other browsers it is target\n     * http://stackoverflow.com/questions/5301643/how-can-i-make-event-srcelement-work-in-firefox-and-what-does-it-mean\n     * @param {Event} event\n     * @returns {Element}\n     */\n    static getTarget(event: Event): Element {\n        const eventNoType = event as any;\n        return eventNoType.target || eventNoType.srcElement;\n    }\n\n    static isElementChildOfClass(element: HTMLElement, cls: string, maxNest?: number): boolean {\n        let counter = 0;\n        while (element) {\n            if (this.containsClass(element, cls)) {\n                return true;\n            }\n            element = element.parentElement;\n            if (maxNest && ++counter > maxNest) { break; }\n        }\n\n        return false;\n    }\n\n    static isElementInEventPath(element: HTMLElement, event: Event): boolean {\n        if (!event || !element) {\n            return false;\n        }\n        const path = _.getEventPath(event);\n        return path.indexOf(element) >= 0;\n    }\n\n    static isFunction(val: any): boolean {\n        return !!(val && val.constructor && val.call && val.apply);\n    }\n\n    static createEventPath(event: Event): EventTarget[] {\n        const res: EventTarget[] = [];\n        let pointer: any = _.getTarget(event);\n        while (pointer) {\n            res.push(pointer);\n            pointer = pointer.parentElement;\n        }\n        return res;\n    }\n\n    /**\n     * firefox doesn't have event.path set, or any alternative to it, so we hack\n     * it in. this is needed as it's to late to work out the path when the item is\n     * removed from the dom. used by MouseEventService, where it works out if a click\n     * was from the current grid, or a detail grid (master / detail).\n     * @param {Event} event\n     */\n    static addAgGridEventPath(event: Event): void {\n        (event as any).__agGridEventPath = this.getEventPath(event);\n    }\n\n    /**\n     * Gets the path for an Event.\n     * https://stackoverflow.com/questions/39245488/event-path-undefined-with-firefox-and-vue-js\n     * https://developer.mozilla.org/en-US/docs/Web/API/Event\n     * @param {Event} event\n     * @returns {EventTarget[]}\n     */\n    static getEventPath(event: Event): EventTarget[] {\n        const eventNoType = event as any;\n        if (eventNoType.deepPath) {\n            // IE supports deep path\n            return eventNoType.deepPath();\n        } else if (eventNoType.path) {\n            // Chrome supports path\n            return eventNoType.path;\n        } else if (eventNoType.composedPath) {\n            // Firefox supports composePath\n            return eventNoType.composedPath();\n        } else if (eventNoType.__agGridEventPath) {\n            // Firefox supports composePath\n            return eventNoType.__agGridEventPath;\n        } else {\n            // and finally, if none of the above worked,\n            // we create the path ourselves\n            return this.createEventPath(event);\n        }\n    }\n\n    static forEachSnapshotFirst(list: any[], callback: (item: any) => void): void {\n        if (list) {\n            const arrayCopy = list.slice(0);\n            arrayCopy.forEach(callback);\n        }\n    }\n\n    /**\n     * Gets the document body width\n     * from: http://stackoverflow.com/questions/1038727/how-to-get-browser-width-using-javascript-code\n     * @returns {number}\n     */\n    static getBodyWidth(): number {\n        if (document.body) {\n            return document.body.clientWidth;\n        }\n\n        if (window.innerHeight) {\n            return window.innerWidth;\n        }\n\n        if (document.documentElement && document.documentElement.clientWidth) {\n            return document.documentElement.clientWidth;\n        }\n\n        return -1;\n    }\n\n    /**\n     * Gets the body height\n     * from: http://stackoverflow.com/questions/1038727/how-to-get-browser-width-using-javascript-code\n     * @returns {number}\n     */\n    static getBodyHeight(): number {\n        if (document.body) {\n            return document.body.clientHeight;\n        }\n\n        if (window.innerHeight) {\n            return window.innerHeight;\n        }\n\n        if (document.documentElement && document.documentElement.clientHeight) {\n            return document.documentElement.clientHeight;\n        }\n\n        return -1;\n    }\n\n    static setCheckboxState(eCheckbox: any, state: any) {\n        if (typeof state === 'boolean') {\n            eCheckbox.checked = state;\n            eCheckbox.indeterminate = false;\n        } else {\n            // isNodeSelected returns back undefined if it's a group and the children\n            // are a mix of selected and unselected\n            eCheckbox.indeterminate = true;\n        }\n    }\n\n    static traverseNodesWithKey(nodes: RowNode[], callback: (node: RowNode, key: string) => void): void {\n        const keyParts: any[] = [];\n\n        recursiveSearchNodes(nodes);\n\n        function recursiveSearchNodes(currentNodes: RowNode[]): void {\n            currentNodes.forEach((node: RowNode) => {\n\n                // also checking for children for tree data\n                if (node.group || node.hasChildren()) {\n                    keyParts.push(node.key);\n                    const key = keyParts.join('|');\n                    callback(node, key);\n                    recursiveSearchNodes(node.childrenAfterGroup);\n                    keyParts.pop();\n                }\n            });\n        }\n    }\n\n    /**\n     * Converts a camelCase string into hyphenated string\n     * from https://gist.github.com/youssman/745578062609e8acac9f\n     * @param {string} str\n     * @return {string}\n     */\n    static camelCaseToHyphen(str: string): string | null {\n        if (str === null || str === undefined) {\n            return null;\n        }\n        return str.replace(/([A-Z])/g, (g) => '-' + g[0].toLowerCase());\n    }\n\n    /**\n     * Converts a hyphenated string into camelCase string\n     * from https://stackoverflow.com/questions/6660977/convert-hyphens-to-camel-case-camelcase\n     * @param {string} str\n     * @return {string}\n     */\n    static hyphenToCamelCase(str: string): string | null {\n        if (str === null || str === undefined) {\n            return null;\n        }\n        return str.replace(/-([a-z])/g, (g) => g[1].toUpperCase());\n    }\n\n    static capitalise(str: string): string {\n        return str[0].toUpperCase() + str.substr(1).toLowerCase();\n    }\n\n    /**\n     * Converts a CSS object into string\n     * @param {Object} stylesToUse an object eg: {color: 'black', top: '25px'}\n     * @return {string} A string like \"color: black; top: 25px;\" for html\n     */\n    static cssStyleObjectToMarkup(stylesToUse: any): string {\n        if (!stylesToUse) {\n            return '';\n        }\n\n        const resParts: string[] = [];\n        this.iterateObject(stylesToUse, (styleKey: string, styleValue: string) => {\n            const styleKeyDashed = this.camelCaseToHyphen(styleKey);\n            resParts.push(`${styleKeyDashed}: ${styleValue};`);\n        });\n\n        return resParts.join(' ');\n    }\n\n    /**\n     * Check if a value is numeric\n     * from http://stackoverflow.com/questions/9716468/is-there-any-function-like-isnumeric-in-javascript-to-validate-numbers\n     * @param {any} value\n     * @return {boolean}\n     */\n    static isNumeric(value: any): boolean {\n        if (value === '') {\n            return false;\n        }\n        return !isNaN(parseFloat(value)) && isFinite(value);\n    }\n\n    static escape(toEscape: string | null): string | null {\n        if (toEscape === null || toEscape === undefined || !toEscape.replace) {\n            return toEscape;\n        }\n\n        return toEscape.replace(reUnescapedHtml, chr => HTML_ESCAPES[chr]);\n    }\n\n    /**\n     * Mouse wheel (and 2-finger trackpad) support on the web sucks.  It is\n     * complicated, thus this doc is long and (hopefully) detailed enough to answer\n     * your questions.\n     *\n     * If you need to react to the mouse wheel in a predictable way, this code is\n     * like your bestest friend. * hugs *\n     *\n     * As of today, there are 4 DOM event types you can listen to:\n     *\n     *   'wheel'                -- Chrome(31+), FF(17+), IE(9+)\n     *   'mousewheel'           -- Chrome, IE(6+), Opera, Safari\n     *   'MozMousePixelScroll'  -- FF(3.5 only!) (2010-2013) -- don't bother!\n     *   'DOMMouseScroll'       -- FF(0.9.7+) since 2003\n     *\n     * So what to do?  The is the best:\n     *\n     *   normalizeWheel.getEventType();\n     *\n     * In your event callback, use this code to get sane interpretation of the\n     * deltas.  This code will return an object with properties:\n     *\n     *   spinX   -- normalized spin speed (use for zoom) - x plane\n     *   spinY   -- \" - y plane\n     *   pixelX  -- normalized distance (to pixels) - x plane\n     *   pixelY  -- \" - y plane\n     *\n     * Wheel values are provided by the browser assuming you are using the wheel to\n     * scroll a web page by a number of lines or pixels (or pages).  Values can vary\n     * significantly on different platforms and browsers, forgetting that you can\n     * scroll at different speeds.  Some devices (like trackpads) emit more events\n     * at smaller increments with fine granularity, and some emit massive jumps with\n     * linear speed or acceleration.\n     *\n     * This code does its best to normalize the deltas for you:\n     *\n     *   - spin is trying to normalize how far the wheel was spun (or trackpad\n     *     dragged).  This is super useful for zoom support where you want to\n     *     throw away the chunky scroll steps on the PC and make those equal to\n     *     the slow and smooth tiny steps on the Mac. Key data: This code tries to\n     *     resolve a single slow step on a wheel to 1.\n     *\n     *   - pixel is normalizing the desired scroll delta in pixel units.  You'll\n     *     get the crazy differences between browsers, but at least it'll be in\n     *     pixels!\n     *\n     *   - positive value indicates scrolling DOWN/RIGHT, negative UP/LEFT.  This\n     *     should translate to positive value zooming IN, negative zooming OUT.\n     *     This matches the newer 'wheel' event.\n     *\n     * Why are there spinX, spinY (or pixels)?\n     *\n     *   - spinX is a 2-finger side drag on the trackpad, and a shift + wheel turn\n     *     with a mouse.  It results in side-scrolling in the browser by default.\n     *\n     *   - spinY is what you expect -- it's the classic axis of a mouse wheel.\n     *\n     *   - I dropped spinZ/pixelZ.  It is supported by the DOM 3 'wheel' event and\n     *     probably is by browsers in conjunction with fancy 3D controllers .. but\n     *     you know.\n     *\n     * Implementation info:\n     *\n     * Examples of 'wheel' event if you scroll slowly (down) by one step with an\n     * average mouse:\n     *\n     *   OS X + Chrome  (mouse)     -    4   pixel delta  (wheelDelta -120)\n     *   OS X + Safari  (mouse)     -  N/A   pixel delta  (wheelDelta  -12)\n     *   OS X + Firefox (mouse)     -    0.1 line  delta  (wheelDelta  N/A)\n     *   Win8 + Chrome  (mouse)     -  100   pixel delta  (wheelDelta -120)\n     *   Win8 + Firefox (mouse)     -    3   line  delta  (wheelDelta -120)\n     *\n     * On the trackpad:\n     *\n     *   OS X + Chrome  (trackpad)  -    2   pixel delta  (wheelDelta   -6)\n     *   OS X + Firefox (trackpad)  -    1   pixel delta  (wheelDelta  N/A)\n     *\n     * On other/older browsers.. it's more complicated as there can be multiple and\n     * also missing delta values.\n     *\n     * The 'wheel' event is more standard:\n     *\n     * http://www.w3.org/TR/DOM-Level-3-Events/#events-wheelevents\n     *\n     * The basics is that it includes a unit, deltaMode (pixels, lines, pages), and\n     * deltaX, deltaY and deltaZ.  Some browsers provide other values to maintain\n     * backward compatibility with older events.  Those other values help us\n     * better normalize spin speed.  Example of what the browsers provide:\n     *\n     *                          | event.wheelDelta | event.detail\n     *        ------------------+------------------+--------------\n     *          Safari v5/OS X  |       -120       |       0\n     *          Safari v5/Win7  |       -120       |       0\n     *         Chrome v17/OS X  |       -120       |       0\n     *         Chrome v17/Win7  |       -120       |       0\n     *                IE9/Win7  |       -120       |   undefined\n     *         Firefox v4/OS X  |     undefined    |       1\n     *         Firefox v4/Win7  |     undefined    |       3\n     *\n     * from: https://github.com/facebook/fixed-data-table/blob/master/src/vendor_upstream/dom/normalizeWheel.js\n     * @param {any} event\n     * @return {any}\n     */\n    static normalizeWheel(event: any): any {\n        const PIXEL_STEP = 10;\n        const LINE_HEIGHT = 40;\n        const PAGE_HEIGHT = 800;\n\n        // spinX, spinY\n        let sX = 0;\n        let sY = 0;\n\n        // pixelX, pixelY\n        let pX = 0;\n        let pY = 0;\n\n        // Legacy\n        if ('detail' in event) {\n            sY = event.detail;\n        }\n        if ('wheelDelta' in event) {\n            sY = -event.wheelDelta / 120;\n        }\n        if ('wheelDeltaY' in event) {\n            sY = -event.wheelDeltaY / 120;\n        }\n        if ('wheelDeltaX' in event) {\n            sX = -event.wheelDeltaX / 120;\n        }\n\n        // side scrolling on FF with DOMMouseScroll\n        if ('axis' in event && event.axis === event.HORIZONTAL_AXIS) {\n            sX = sY;\n            sY = 0;\n        }\n\n        pX = sX * PIXEL_STEP;\n        pY = sY * PIXEL_STEP;\n\n        if ('deltaY' in event) {\n            pY = event.deltaY;\n        }\n        if ('deltaX' in event) {\n            pX = event.deltaX;\n        }\n\n        if ((pX || pY) && event.deltaMode) {\n            if (event.deltaMode == 1) {          // delta in LINE units\n                pX *= LINE_HEIGHT;\n                pY *= LINE_HEIGHT;\n            } else {                             // delta in PAGE units\n                pX *= PAGE_HEIGHT;\n                pY *= PAGE_HEIGHT;\n            }\n        }\n\n        // Fall-back if spin cannot be determined\n        if (pX && !sX) {\n            sX = (pX < 1) ? -1 : 1;\n        }\n        if (pY && !sY) {\n            sY = (pY < 1) ? -1 : 1;\n        }\n\n        return {\n            spinX: sX,\n            spinY: sY,\n            pixelX: pX,\n            pixelY: pY\n        };\n    }\n\n    /**\n     * from https://stackoverflow.com/questions/24004791/can-someone-explain-the-debounce-function-in-javascript\n     * @param {Function} func The function to be debounced\n     * @param {number} wait The time in ms to debounce\n     * @param {boolean} immediate If it should run immediately or wait for the initial debounce delay\n     * @return {Function} The debounced function\n     */\n    static debounce(func: (...args: any[]) => void, wait: number, immediate: boolean = false) {\n        // 'private' variable for instance\n        // The returned function will be able to reference this due to closure.\n        // Each call to the returned function will share this common timer.\n        let timeout: any;\n\n        // Calling debounce returns a new anonymous function\n        return function(...args: any[]) {\n            // reference the context and args for the setTimeout function\n            const context = this;\n\n            // Should the function be called now? If immediate is true\n            //   and not already in a timeout then the answer is: Yes\n            const callNow = immediate && !timeout;\n\n            // This is the basic debounce behaviour where you can call this\n            //   function several times, but it will only execute once\n            //   [before or after imposing a delay].\n            //   Each time the returned function is called, the timer starts over.\n            window.clearTimeout(timeout);\n\n            // Set the new timeout\n            timeout = window.setTimeout(function() {\n\n                // Inside the timeout function, clear the timeout variable\n                // which will let the next execution run when in 'immediate' mode\n                timeout = null;\n\n                // Check if the function already ran with the immediate flag\n                if (!immediate) {\n                    // Call the original function with apply\n                    // apply lets you define the 'this' object as well as the arguments\n                    //    (both captured before setTimeout)\n                    func.apply(context, args);\n                }\n            }, wait);\n\n            // Immediate mode and no wait timer? Execute the function..\n            if (callNow) {\n                func.apply(context, args);\n            }\n        };\n    }\n\n    /**\n     * a user once raised an issue - they said that when you opened a popup (eg context menu)\n     * and then clicked on a selection checkbox, the popup wasn't closed. this is because the\n     * popup listens for clicks on the body, however ag-grid WAS stopping propagation on the\n     * checkbox clicks (so the rows didn't pick them up as row selection selection clicks).\n     * to get around this, we have a pattern to stop propagation for the purposes of ag-Grid,\n     * but we still let the event pass back to teh body.\n     * @param {Event} event\n     */\n    static stopPropagationForAgGrid(event: Event): void {\n        (event as any)[AG_GRID_STOP_PROPAGATION] = true;\n    }\n\n    static isStopPropagationForAgGrid(event: Event): boolean {\n        return (event as any)[AG_GRID_STOP_PROPAGATION] === true;\n    }\n\n    static executeInAWhile(funcs: Function[]): void {\n        this.executeAfter(funcs, 400);\n    }\n\n    static executeNextVMTurn(funcs: Function[]): void {\n        this.executeAfter(funcs, 0);\n    }\n\n    static executeAfter(funcs: Function[], millis: number): void {\n        if (funcs.length > 0) {\n            window.setTimeout(() => {\n                funcs.forEach(func => func());\n            }, millis);\n        }\n    }\n\n    static referenceCompare(left: any, right: any): boolean {\n        if (left == null && right == null) {\n            return true;\n        }\n        if (left == null && right) {\n            return false;\n        }\n        if (left && right == null) {\n            return false;\n        }\n        return left === right;\n    }\n\n    static get(source: any, expression: string, defaultValue: any): any {\n        if (source == null) {\n            return defaultValue;\n        }\n\n        const keys = expression.split(\".\");\n        let objectToRead = source;\n\n        while (keys.length > 1) {\n            objectToRead = objectToRead[keys.shift()];\n\n            if (objectToRead == null) {\n                return defaultValue;\n            }\n        }\n\n        const value = objectToRead[keys[0]];\n\n        return value != null ? value : defaultValue;\n    }\n\n    static set(target: any, expression: string, value: any) {\n        if (target == null) {\n            return;\n        }\n\n        const keys = expression.split(\".\");\n        let objectToUpdate = target;\n\n        while (keys.length > 1) {\n            objectToUpdate = objectToUpdate[keys.shift()];\n\n            if (objectToUpdate == null) {\n                return;\n            }\n        }\n\n        objectToUpdate[keys[0]] = value;\n    }\n\n    static addSafePassiveEventListener(\n        frameworkOverrides: IFrameworkOverrides,\n        eElement: HTMLElement,\n        event: string, listener: (event?: any) => void\n    ) {\n        const isPassive = this.includes(Utils.PASSIVE_EVENTS, event);\n        const isOutsideAngular = this.includes(Utils.OUTSIDE_ANGULAR_EVENTS, event);\n        const options = isPassive ? { passive: true } : undefined;\n\n        if (isOutsideAngular) {\n            frameworkOverrides.addEventListenerOutsideAngular(eElement, event, listener, options);\n        } else {\n            eElement.addEventListener(event, listener, options);\n        }\n    }\n\n    /**\n     * Converts a camelCase string into regular text\n     * from: https://stackoverflow.com/questions/15369566/putting-space-in-camel-case-string-using-regular-expression\n     * @param {string} camelCase\n     * @return {string}\n     */\n    static camelCaseToHumanText(camelCase: string | undefined): string | null {\n        if (!camelCase || camelCase == null) {\n            return null;\n        }\n\n        const rex = /([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;\n        const words: string[] = camelCase.replace(rex, '$1$4 $2$3$5').replace('.', ' ').split(' ');\n\n        return words.map(word => word.substring(0, 1).toUpperCase() + ((word.length > 1) ? word.substring(1, word.length) : '')).join(' ');\n    }\n\n    /**\n     * Displays a message to the browser. this is useful in iPad, where you can't easily see the console.\n     * so the javascript code can use this to give feedback. this is NOT intended to be called in production.\n     * it is intended the ag-Grid developer calls this to troubleshoot, but then takes out the calls before\n     * checking in.\n     * @param {string} msg\n     */\n    static message(msg: string): void {\n        const eMessage = document.createElement('div');\n        eMessage.innerHTML = msg;\n        let eBox = document.querySelector('#__ag__message');\n        if (!eBox) {\n            const template = `<div id=\"__ag__message\" style=\"display: inline-block; position: absolute; top: 0px; left: 0px; color: white; background-color: black; z-index: 20; padding: 2px; border: 1px solid darkred; height: 200px; overflow-y: auto;\"></div>`;\n            eBox = this.loadTemplate(template);\n            if (document.body) {\n                document.body.appendChild(eBox);\n            }\n        }\n        eBox.insertBefore(eMessage, eBox.children[0]);\n    }\n\n    /**\n     * Gets called by: a) ClientSideNodeManager and b) GroupStage to do sorting.\n     * when in ClientSideNodeManager we always have indexes (as this sorts the items the\n     * user provided) but when in GroupStage, the nodes can contain filler nodes that\n     * don't have order id's\n     * @param {RowNode[]} rowNodes\n     * @param {Object} rowNodeOrder\n     */\n    static sortRowNodesByOrder(rowNodes: RowNode[], rowNodeOrder: { [id: string]: number }): void {\n        if (!rowNodes) {\n            return;\n        }\n\n        const comparator = (nodeA: RowNode, nodeB: RowNode) => {\n            const positionA = rowNodeOrder[nodeA.id];\n            const positionB = rowNodeOrder[nodeB.id];\n\n            const aHasIndex = positionA !== undefined;\n            const bHasIndex = positionB !== undefined;\n\n            const bothNodesAreUserNodes = aHasIndex && bHasIndex;\n            const bothNodesAreFillerNodes = !aHasIndex && !bHasIndex;\n\n            if (bothNodesAreUserNodes) {\n                // when comparing two nodes the user has provided, they always\n                // have indexes\n                return positionA - positionB;\n            } else if (bothNodesAreFillerNodes) {\n                // when comparing two filler nodes, we have no index to compare them\n                // against, however we want this sorting to be deterministic, so that\n                // the rows don't jump around as the user does delta updates. so we\n                // want the same sort result. so we use the __objectId - which doesn't make sense\n                // from a sorting point of view, but does give consistent behaviour between\n                // calls. otherwise groups jump around as delta updates are done.\n                // note: previously here we used nodeId, however this gave a strange order\n                // as string ordering of numbers is wrong, so using id based on creation order\n                // as least gives better looking order.\n                return nodeA.__objectId - nodeB.__objectId;\n            } else if (aHasIndex) {\n                return 1;\n            }\n\n            return -1;\n        };\n\n        // check if the list first needs sorting\n        let rowNodeA: RowNode;\n        let rowNodeB: RowNode;\n        let atLeastOneOutOfOrder = false;\n        for (let i = 0; i < rowNodes.length - 1; i++) {\n            rowNodeA = rowNodes[i];\n            rowNodeB = rowNodes[i + 1];\n            if (comparator(rowNodeA, rowNodeB) > 0) {\n                atLeastOneOutOfOrder = true;\n                break;\n            }\n        }\n\n        if (atLeastOneOutOfOrder) {\n            rowNodes.sort(comparator);\n        }\n    }\n\n    public static fuzzyCheckStrings(inputValues: string[],\n        validValues: string[],\n        allSuggestions: string[]): { [p: string]: string[] } {\n        const fuzzyMatches: { [p: string]: string[] } = {};\n        const invalidInputs: string[] = inputValues.filter(inputValue =>\n            !validValues.some(\n                (validValue) => validValue === inputValue\n            )\n        );\n\n        if (invalidInputs.length > 0) {\n            invalidInputs.forEach(invalidInput =>\n                fuzzyMatches[invalidInput] = this.fuzzySuggestions(invalidInput, allSuggestions)\n            );\n        }\n\n        return fuzzyMatches;\n    }\n\n    /**\n     *\n     * @param {String} inputValue The value to be compared against a list of strings\n     * @param allSuggestions The list of strings to be compared against\n     * @param hideIrrelevant By default, fuzzy suggestions will just sort the allSuggestions list, set this to true\n     *        to filter out the irrelevant values\n     * @param weighted Set this to true, to make letters matched in the order they were typed have priority in the results.\n     */\n    public static fuzzySuggestions(\n        inputValue: string,\n        allSuggestions: string[],\n        hideIrrelevant?: boolean,\n        weighted?: true\n    ): string[] {\n        const search = weighted ? _.string_weighted_distances : _.string_distances;\n        let thisSuggestions: { value: string, relevance: number }[] = allSuggestions.map((text) => ({\n            value: text,\n            relevance: search(inputValue.toLowerCase(), text.toLocaleLowerCase())\n        }));\n\n        thisSuggestions.sort((a, b) => b.relevance - a.relevance);\n\n        if (hideIrrelevant) {\n            thisSuggestions = thisSuggestions.filter(suggestion => suggestion.relevance !== 0);\n        }\n\n        return thisSuggestions.map(suggestion => suggestion.value);\n    }\n\n    /**\n     * Algorithm to do fuzzy search\n     * from https://stackoverflow.com/questions/23305000/javascript-fuzzy-search-that-makes-sense\n     * @param {string} from\n     * @return {[]}\n     */\n    static get_bigrams(from: string) {\n        const s = from.toLowerCase();\n        const v = new Array(s.length - 1);\n        let i;\n        let j;\n        let ref;\n\n        for (i = j = 0, ref = v.length; j <= ref; i = j += 1) {\n            v[i] = s.slice(i, i + 2);\n\n        }\n\n        return v;\n    }\n\n    static string_distances(str1: string, str2: string): number {\n        if (str1.length === 0 && str2.length === 0) {\n            return 0;\n        }\n\n        const pairs1 = _.get_bigrams(str1);\n        const pairs2 = _.get_bigrams(str2);\n        const union = pairs1.length + pairs2.length;\n        let hit_count = 0;\n        let j;\n        let len;\n\n        for (j = 0, len = pairs1.length; j < len; j++) {\n            const x = pairs1[j];\n            let k;\n            let len1;\n\n            for (k = 0, len1 = pairs2.length; k < len1; k++) {\n                const y = pairs2[k];\n                if (x === y) {\n                    hit_count++;\n                }\n            }\n        }\n\n        return hit_count > 0 ? (2 * hit_count) / union : 0;\n    }\n\n    static string_weighted_distances(str1: string, str2: string): number {\n        const a = str1.replace(/\\s/g, '');\n        const b = str2.replace(/\\s/g, '');\n\n        let weight = 0;\n        let lastIndex = 0;\n        for (let i = 0; i < a.length; i++) {\n            const idx = b.indexOf(a[i]);\n            if (idx === -1) {\n                continue;\n            }\n\n            lastIndex = idx;\n            weight += ((b.length - lastIndex) * 100) / b.length;\n            weight *= weight;\n        }\n\n        return weight;\n    }\n\n    private static isNumpadDelWithNumlockOnForEdgeOrIe(event: KeyboardEvent) {\n        if (Utils.isBrowserEdge() || Utils.isBrowserIE()) {\n            return event.key === Utils.NUMPAD_DEL_NUMLOCK_ON_KEY &&\n                event.charCode === Utils.NUMPAD_DEL_NUMLOCK_ON_CHARCODE;\n        }\n\n        return false;\n    }\n\n    /**\n     * cell renderers are used in a few places. they bind to dom slightly differently to other cell renderes as they\n     * can return back strings (instead of html elemnt) in the getGui() method. common code placed here to handle that.\n     * @param {Promise<ICellRendererComp>} cellRendererPromise\n     * @param {HTMLElement} eTarget\n     */\n    public static bindCellRendererToHtmlElement(cellRendererPromise: Promise<ICellRendererComp>, eTarget: HTMLElement) {\n        cellRendererPromise.then(cellRenderer => {\n            const gui: HTMLElement | string = cellRenderer.getGui();\n            if (gui != null) {\n                if (typeof gui == 'object') {\n                    eTarget.appendChild(gui);\n                } else {\n                    eTarget.innerHTML = gui;\n                }\n            }\n        });\n    }\n\n    static convertToSet<T>(list: T[]): Set<T> {\n        const set = new Set<T>();\n\n        list.forEach(x => set.add(x));\n\n        return set;\n    }\n\n    static deepFreeze(object: any): any {\n        Object.freeze(object);\n\n        _.values(object).filter(v => v != null).forEach(v => {\n            if (typeof v === 'object' || typeof v === 'function') {\n                this.deepFreeze(v);\n            }\n        });\n\n        return object;\n    }\n}\n\nexport class NumberSequence {\n\n    private nextValue: number;\n    private step: number;\n\n    constructor(initValue = 0, step = 1) {\n        this.nextValue = initValue;\n        this.step = step;\n    }\n\n    public next(): number {\n        const valToReturn = this.nextValue;\n        this.nextValue += this.step;\n        return valToReturn;\n    }\n\n    public peek(): number {\n        return this.nextValue;\n    }\n\n    public skip(count: number): void {\n        this.nextValue += count;\n    }\n}\n\nexport const _ = Utils;"]}