{"version":3,"sources":["../../src/ts/rendering/cellEditors/popupEditorWrapper.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+DAA8D;AAE9D,iDAAkD;AAElD,qCAAgC;AAEhC;IAAwC,sCAAc;IAUlD,4BAAY,UAA2B;QAAvC,YACI,kBAAM,kDAA8C,CAAC,SAExD;QATO,yBAAmB,GAAG,KAAK,CAAC;QAQhC,KAAI,CAAC,UAAU,GAAG,UAAU,CAAC;;IACjC,CAAC;IAEO,sCAAS,GAAjB,UAAkB,KAAoB;QAClC,IAAI,CAAC,SAAC,CAAC,8BAA8B,CAAC,IAAI,CAAC,kBAAkB,EAAE,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,EAAE;YAC/G,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;SAChC;IACL,CAAC;IAEM,mCAAM,GAAb;QAEI,kEAAkE;QAClE,4DAA4D;QAC5D,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE;YAC3B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC;YAC3C,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;SACnC;QAED,OAAO,iBAAM,MAAM,WAAE,CAAC;IAC1B,CAAC;IAEM,iCAAI,GAAX,UAAY,MAAyB;QAArC,iBAoBC;QAnBG,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,kBAAkB,CAAC,4BAA4B,EAAE,IAAI,CAAC,CAAC;QAEzG,IAAI,CAAC,cAAc,CAAC;YACZ,IAAI,KAAI,CAAC,UAAU,CAAC,OAAO,EAAE;gBACzB,KAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;aAC7B;QACL,CAAC,CACJ,CAAC;QAEF,IAAI,CAAC,2BAA2B;QAC5B,gEAAgE;QAChE,sEAAsE;QACtE,oBAAoB;QACpB,iBAAM,MAAM,WAAE,EACd,SAAS,EACT,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAC5B,CAAC;IAEN,CAAC;IAEM,6CAAgB,GAAvB;QACI,IAAI,IAAI,CAAC,UAAU,CAAC,gBAAgB,EAAE;YAClC,IAAI,CAAC,UAAU,CAAC,gBAAgB,EAAE,CAAC;SACtC;IACL,CAAC;IAEM,qCAAQ,GAAf;QACI,OAAO,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;IACtC,CAAC;IAEM,gDAAmB,GAA1B;QACI,IAAI,IAAI,CAAC,UAAU,CAAC,mBAAmB,EAAE;YACrC,OAAO,IAAI,CAAC,UAAU,CAAC,mBAAmB,EAAE,CAAC;SAChD;IACL,CAAC;IAEM,6CAAgB,GAAvB;QACI,IAAI,IAAI,CAAC,UAAU,CAAC,gBAAgB,EAAE;YAClC,OAAO,IAAI,CAAC,UAAU,CAAC,gBAAgB,EAAE,CAAC;SAC7C;IACL,CAAC;IAEM,oCAAO,GAAd;QACI,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE;YACzB,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;SAC7B;IACL,CAAC;IAEM,qCAAQ,GAAf;QACI,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE;YAC1B,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;SAC9B;IACL,CAAC;IAjFa,+CAA4B,GAAG,oBAAoB,CAAC;IAEjC;QAAhC,mBAAS,CAAC,oBAAoB,CAAC;kEAAwC;IAiF5E,yBAAC;CAzFD,AAyFC,CAzFuC,+BAAc,GAyFrD;AAzFY,gDAAkB","file":"popupEditorWrapper.js","sourcesContent":["import { PopupComponent } from \"../../widgets/popupComponent\";\nimport { ICellEditorComp, ICellEditorParams } from \"../../interfaces/iCellEditor\";\nimport { Autowired } from \"../../context/context\";\nimport { GridOptionsWrapper } from \"../../gridOptionsWrapper\";\nimport { _ } from \"../../utils\";\n\nexport class PopupEditorWrapper extends PopupComponent implements ICellEditorComp {\n\n    private cellEditor: ICellEditorComp;\n    private params: any;\n    private getGuiCalledOnChild = false;\n\n    public static DOM_KEY_POPUP_EDITOR_WRAPPER = 'popupEditorWrapper';\n\n    @Autowired('gridOptionsWrapper') gridOptionsWrapper: GridOptionsWrapper;\n\n    constructor(cellEditor: ICellEditorComp) {\n        super(`<div class=\"ag-popup-editor\" tabindex=\"-1\"/>`);\n        this.cellEditor = cellEditor;\n    }\n\n    private onKeyDown(event: KeyboardEvent): void {\n        if (!_.isUserSuppressingKeyboardEvent(this.gridOptionsWrapper, event, this.params.node, this.params.column, true)) {\n            this.params.onKeyDown(event);\n        }\n    }\n\n    public getGui(): HTMLElement {\n\n        // we call getGui() on child here (rather than in the constructor)\n        // as we should wait for 'init' to be called on child first.\n        if (!this.getGuiCalledOnChild) {\n            this.appendChild(this.cellEditor.getGui());\n            this.getGuiCalledOnChild = true;\n        }\n\n        return super.getGui();\n    }\n\n    public init(params: ICellEditorParams): void {\n        this.params = params;\n        this.gridOptionsWrapper.setDomData(this.getGui(), PopupEditorWrapper.DOM_KEY_POPUP_EDITOR_WRAPPER, true);\n\n        this.addDestroyFunc(() => {\n                if (this.cellEditor.destroy) {\n                    this.cellEditor.destroy();\n                }\n            }\n        );\n\n        this.addDestroyableEventListener(\n            // this needs to be 'super' and not 'this' as if we call 'this',\n            // it ends up called 'getGui()' on the child before 'init' was called,\n            // which is not good\n            super.getGui(),\n            'keydown',\n            this.onKeyDown.bind(this)\n        );\n\n    }\n\n    public afterGuiAttached(): void {\n        if (this.cellEditor.afterGuiAttached) {\n            this.cellEditor.afterGuiAttached();\n        }\n    }\n\n    public getValue(): any {\n        return this.cellEditor.getValue();\n    }\n\n    public isCancelBeforeStart(): boolean {\n        if (this.cellEditor.isCancelBeforeStart) {\n            return this.cellEditor.isCancelBeforeStart();\n        }\n    }\n\n    public isCancelAfterEnd(): boolean {\n        if (this.cellEditor.isCancelAfterEnd) {\n            return this.cellEditor.isCancelAfterEnd();\n        }\n    }\n\n    public focusIn(): void {\n        if (this.cellEditor.focusIn) {\n            this.cellEditor.focusIn();\n        }\n    }\n\n    public focusOut(): void {\n        if (this.cellEditor.focusOut) {\n            this.cellEditor.focusOut();\n        }\n    }\n\n}"]}